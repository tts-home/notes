"use strict";(self.webpackChunktts_notes=self.webpackChunktts_notes||[]).push([[8364],{8377:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>u,frontMatter:()=>r,metadata:()=>c,toc:()=>l});var a=n(5893),i=n(1151);const r={},o="Java Runtime Image",c={id:"cicd/docker/java_runtime",title:"Java Runtime Image",description:"Debian bullseye with Java 17.0.2",source:"@site/docs/cicd/docker/java_runtime.md",sourceDirName:"cicd/docker",slug:"/cicd/docker/java_runtime",permalink:"/notes/cicd/docker/java_runtime",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"docs",previous:{title:"Docker Timezone",permalink:"/notes/cicd/docker/docker_timezone"},next:{title:"k3s \u5b89\u88c5\u914d\u7f6e",permalink:"/notes/cicd/docker/k3s_install_config"}},s={},l=[{value:"Debian bullseye with Java 17.0.2",id:"debian-bullseye-with-java-1702",level:2},{value:"Debian with Java 17.0.2",id:"debian-with-java-1702",level:2}];function d(e){const t={admonition:"admonition",code:"code",h1:"h1",h2:"h2",li:"li",pre:"pre",ul:"ul",...(0,i.a)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.h1,{id:"java-runtime-image",children:"Java Runtime Image"}),"\n",(0,a.jsx)(t.h2,{id:"debian-bullseye-with-java-1702",children:"Debian bullseye with Java 17.0.2"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-dockerfile",children:"FROM debian:bullseye-slim\n\nENV LANG C.UTF-8\nENV JAVA_HOME /opt/java\nENV PATH /opt/java/bin:$PATH\n\nRUN set -eux; \\\n\t\\\n\tarch=\"$(dpkg --print-architecture)\"; \\\n\tcase \"$arch\" in \\\n\t\t'amd64') \\\n\t\t\turl='https://mirrors.tuna.tsinghua.edu.cn/AdoptOpenJDK/17/jre/x64/linux/OpenJDK17U-jre_x64_linux_hotspot_17.0.2_8.tar.gz'; \\\n\t\t\t;; \\\n\t\t'arm64') \\\n\t\t\turl='https://mirrors.tuna.tsinghua.edu.cn/AdoptOpenJDK/17/jre/aarch64/linux/OpenJDK17U-jre_aarch64_linux_hotspot_17.0.2_8.tar.gz'; \\\n\t\t\t;; \\\n\t\t*) echo >&2 \"error: unsupported architecture: '$arch'\"; exit 1 ;; \\\n\tesac; \\\n\t\\\n    apt-get update; \\\n    apt-get install -y  -y --no-install-recommends ca-certificates p11-kit wget; \\\n    rm -rf /var/lib/apt/lists/*; \\\n\twget --progress=dot:giga -O java.tar.gz \"$url\"; \\\n\tmkdir -p /opt/java; \\\n\ttar --extract \\\n\t\t--file java.tar.gz \\\n\t\t--directory /opt/java \\\n\t\t--strip-components 1 \\\n\t\t--no-same-owner \\\n\t; \\\n\trm java.tar.gz;\nCMD [\"bash\"]\n"})}),"\n",(0,a.jsx)(t.admonition,{title:"\u63d0\u793a",type:"info",children:(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsxs)(t.li,{children:["\u53ef\u5728\u521b\u5efa/\u542f\u52a8\u5bb9\u5668\u65f6\u6307\u5b9a\u65f6\u533a\u73af\u5883\u53d8\u91cf ",(0,a.jsx)(t.code,{children:"-e TZ=Asia/Shanghai"})," \u6765\u8c03\u6574\u65f6\u533a\u3002"]}),"\n"]})}),"\n",(0,a.jsx)(t.h2,{id:"debian-with-java-1702",children:"Debian with Java 17.0.2"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-dockerfile",children:'FROM --platform=linux/arm64 debian:stable-slim\n\n# \u65f6\u533a\nRUN echo "Asia/Shanghai" > /etc/timezone && \\\n    ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime && \\\n    dpkg-reconfigure -f noninteractive tzdata\n\nENV JAVA_HOME=/opt/java/\nENV PATH=$JAVA_HOME/bin:$PATH\nCOPY jdk /opt/java/\n\nCMD ["/bin/bash"]\n'})})]})}function u(e={}){const{wrapper:t}={...(0,i.a)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},1151:(e,t,n)=>{n.d(t,{Z:()=>c,a:()=>o});var a=n(7294);const i={},r=a.createContext(i);function o(e){const t=a.useContext(r);return a.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),a.createElement(r.Provider,{value:t},e.children)}}}]);