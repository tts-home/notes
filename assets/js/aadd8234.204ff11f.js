"use strict";(self.webpackChunktts_notes=self.webpackChunktts_notes||[]).push([[4861],{4709:(e,n,l)=>{l.r(n),l.d(n,{assets:()=>o,contentTitle:()=>s,default:()=>j,frontMatter:()=>c,metadata:()=>r,toc:()=>h});var d=l(5893),i=l(1151);const c={},s="MySQL",r={id:"database/mysql",title:"MySQL",description:"\u7d22\u5f15\u5931\u6548",source:"@site/interview/database/mysql.md",sourceDirName:"database",slug:"/database/mysql",permalink:"/notes/interview/database/mysql",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"interview",previous:{title:"Elastic Search",permalink:"/notes/interview/database/elastic_search"},next:{title:"Redis",permalink:"/notes/interview/database/redis"}},o={},h=[{value:"\u7d22\u5f15\u5931\u6548",id:"\u7d22\u5f15\u5931\u6548",level:2},{value:"<code>NULL</code>",id:"null",level:3},{value:"\u524d\u5bfc\u6a21\u7cca\u67e5\u8be2",id:"\u524d\u5bfc\u6a21\u7cca\u67e5\u8be2",level:3},{value:"\u8fdd\u53cd\u6700\u5de6\u5339\u914d\u539f\u5219",id:"\u8fdd\u53cd\u6700\u5de6\u5339\u914d\u539f\u5219",level:3},{value:"\u7d22\u5f15\u5217\u4e0a\u4f5c\u64cd\u4f5c",id:"\u7d22\u5f15\u5217\u4e0a\u4f5c\u64cd\u4f5c",level:3},{value:"\u8303\u56f4\u67e5\u8be2",id:"\u8303\u56f4\u67e5\u8be2",level:3},{value:"<code>OR</code>",id:"or",level:3},{value:"<code>NOT IN</code>",id:"not-in",level:3},{value:"<code>!=</code> / <code>&lt;&gt;</code>",id:"--",level:3},{value:"\u7c7b\u578b/\u7f16\u7801\u4e0d\u4e00\u81f4",id:"\u7c7b\u578b\u7f16\u7801\u4e0d\u4e00\u81f4",level:3},{value:"\u9501",id:"\u9501",level:2},{value:"\u5168\u5c40\u9501",id:"\u5168\u5c40\u9501",level:3},{value:"\u8868\u7ea7\u9501",id:"\u8868\u7ea7\u9501",level:3},{value:"\u884c\u7ea7\u9501",id:"\u884c\u7ea7\u9501",level:3},{value:"\u9875\u7ea7\u9501",id:"\u9875\u7ea7\u9501",level:3},{value:"\u663e\u5f0f\u52a0\u9501",id:"\u663e\u5f0f\u52a0\u9501",level:3},{value:"\u60b2\u89c2\u9501",id:"\u60b2\u89c2\u9501",level:3},{value:"\u4e50\u89c2\u9501",id:"\u4e50\u89c2\u9501",level:3},{value:"<code>MyISAM</code> vs. <code>InnoDB</code>",id:"myisam-vs-innodb",level:2},{value:"<code>MySQL</code> \u65e5\u5fd7",id:"mysql-\u65e5\u5fd7",level:2},{value:"\u9519\u8bef\u65e5\u5fd7(<code>errorlog</code>)",id:"\u9519\u8bef\u65e5\u5fd7errorlog",level:3},{value:"\u67e5\u8be2\u65e5\u5fd7(<code>general log</code>)",id:"\u67e5\u8be2\u65e5\u5fd7general-log",level:3},{value:"\u6162\u67e5\u8be2\u65e5\u5fd7(<code>slow query log</code>)",id:"\u6162\u67e5\u8be2\u65e5\u5fd7slow-query-log",level:3},{value:"\u4e8c\u8fdb\u5236\u65e5\u5fd7",id:"\u4e8c\u8fdb\u5236\u65e5\u5fd7",level:3},{value:"\u91cd\u505a\u65e5\u5fd7(<code>redo log</code>)",id:"\u91cd\u505a\u65e5\u5fd7redo-log",level:3},{value:"\u56de\u6eda\u65e5\u5fd7(<code>undo log</code>)",id:"\u56de\u6eda\u65e5\u5fd7undo-log",level:3},{value:"<code>redo log</code> vs. <code>binlog</code>",id:"redo-log-vs-binlog",level:3},{value:"<code>ACID</code>",id:"acid",level:2},{value:"<code>Atomicity</code>",id:"atomicity",level:3},{value:"<code>Consistency</code>",id:"consistency",level:3},{value:"<code>Isolation</code>",id:"isolation",level:3},{value:"<code>Durability</code>",id:"durability",level:3},{value:"<code>MVCC</code>",id:"mvcc",level:2},{value:"\u5f53\u524d\u8bfb",id:"\u5f53\u524d\u8bfb",level:3},{value:"\u5feb\u7167\u8bfb",id:"\u5feb\u7167\u8bfb",level:3},{value:"\u5b9e\u73b0\u539f\u7406",id:"\u5b9e\u73b0\u539f\u7406",level:3},{value:"\u7248\u672c\u94fe",id:"\u7248\u672c\u94fe",level:4},{value:"<code>Read Viev</code>\uff08\u8bfb\u89c6\u56fe\uff09",id:"read-viev\u8bfb\u89c6\u56fe",level:4},{value:"<code>MySQL</code> \u5bf9\u5e7b\u8bfb\u7684\u5904\u7406",id:"mysql-\u5bf9\u5e7b\u8bfb\u7684\u5904\u7406",level:2},{value:"\u805a\u96c6\u7d22\u5f15 vs. \u975e\u805a\u96c6\u7d22\u5f15",id:"\u805a\u96c6\u7d22\u5f15-vs-\u975e\u805a\u96c6\u7d22\u5f15",level:2},{value:"\u805a\u96c6\u7d22\u5f15",id:"\u805a\u96c6\u7d22\u5f15",level:3},{value:"\u975e\u805a\u96c6\u7d22\u5f15",id:"\u975e\u805a\u96c6\u7d22\u5f15",level:3},{value:"<code>B+Tree</code>",id:"btree",level:2},{value:"<code>MySQL</code> \u4e3b\u4ece\u540c\u6b65",id:"mysql-\u4e3b\u4ece\u540c\u6b65",level:2},{value:"\u4e3b\u4ece\u540c\u6b65\u7684\u597d\u5904",id:"\u4e3b\u4ece\u540c\u6b65\u7684\u597d\u5904",level:3},{value:"\u4e3b\u4ece\u5f62\u5f0f",id:"\u4e3b\u4ece\u5f62\u5f0f",level:3},{value:"\u4e3b\u4ece\u540c\u6b65\u65b9\u6cd5",id:"\u4e3b\u4ece\u540c\u6b65\u65b9\u6cd5",level:3},{value:"\u914d\u7f6e\u4e3b\u4ece\u540c\u6b65",id:"\u914d\u7f6e\u4e3b\u4ece\u540c\u6b65",level:3},{value:"\u4e3b\u4ece\u590d\u5236\u7684\u6d41\u7a0b",id:"\u4e3b\u4ece\u590d\u5236\u7684\u6d41\u7a0b",level:3},{value:"\u591a\u4e3b\u4e00\u4ece\u540c\u6b65",id:"\u591a\u4e3b\u4e00\u4ece\u540c\u6b65",level:3},{value:"\u53cc\u4e3b\u540c\u6b65",id:"\u53cc\u4e3b\u540c\u6b65",level:2},{value:"\u7d22\u5f15\u4e0b\u63a8",id:"\u7d22\u5f15\u4e0b\u63a8",level:2}];function x(e){const n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,i.a)(),...e.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(n.h1,{id:"mysql",children:"MySQL"}),"\n",(0,d.jsx)(n.h2,{id:"\u7d22\u5f15\u5931\u6548",children:"\u7d22\u5f15\u5931\u6548"}),"\n",(0,d.jsx)(n.h3,{id:"null",children:(0,d.jsx)(n.code,{children:"NULL"})}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["\u7d22\u5f15\u662f\u6709\u5e8f\u7684\uff0c",(0,d.jsx)(n.code,{children:"NULL"})," \u662f\u4e0d\u786e\u5b9a\u503c\uff0c\u65e0\u6cd5\u786e\u5b9a\u5176\u5728\u7d22\u5f15\u4e2d\u4f4d\u7f6e\uff0c\u4f7f\u7528 ",(0,d.jsx)(n.code,{children:"IS NULL"})," / ",(0,d.jsx)(n.code,{children:"IS NOT NULL"})," \u53ef\u80fd\u4f1a\u4f7f\u7d22\u5f15\u5931\u6548","\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["\u5982\u679c\u5b57\u6bb5\u4e0d\u5141\u8bb8\u4e3a\u7a7a\uff0c\u5219 ",(0,d.jsx)(n.code,{children:"IS NULL"})," / ",(0,d.jsx)(n.code,{children:"IS NOT NULL"})," \u4f1a\u4f7f\u7d22\u5f15\u5931\u6548"]}),"\n",(0,d.jsxs)(n.li,{children:["\u5982\u679c\u5b57\u6bb5\u5141\u8bb8\u4e3a\u7a7a\uff0c\u5219 ",(0,d.jsx)(n.code,{children:"IS NULL"})," \u8d70 ",(0,d.jsx)(n.code,{children:"ref"})," \u7c7b\u578b\u7684\u7d22\u5f15\uff0c\u800c ",(0,d.jsx)(n.code,{children:"IS NOT NULL"})," \u8d70 ",(0,d.jsx)(n.code,{children:"range"})," \u7c7b\u578b\u7684\u7d22\u5f15"]}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:["\u5982\u679c\u9700\u8981\u628a ",(0,d.jsx)(n.code,{children:"NULL"})," \u5b58\u5165\u7d22\u5f15\uff0c\u65b9\u6cd5\u6709\u4e8c\uff0c\u5176\u4e00\uff0c\u628a ",(0,d.jsx)(n.code,{children:"NULL"})," \u503c\u8f6c\u4e3a\u4e00\u4e2a\u7279\u5b9a\u7684\u503c\uff0c\u5728 ",(0,d.jsx)(n.code,{children:"WHERE"})," \u4e2d\u68c0\u7d22\u65f6\uff0c\u7528\u8be5\u7279\u5b9a\u503c\u67e5\u627e\uff1b\u5176\u4e8c\uff0c\u5efa\u7acb\u4e00\u4e2a\u590d\u5408\u7d22\u5f15\u3002\u4f8b\u5982\u3000",(0,d.jsx)(n.code,{children:"ALTER TABLE FOO CREATE INDEX IDX_BAR(COL_1, 1)"}),"\uff0c\u901a\u8fc7\u5728\u590d\u5408\u7d22\u5f15\u4e2d\u6307\u5b9a\u4e00\u4e2a\u975e\u7a7a\u5e38\u91cf\u503c\uff0c\u800c\u4f7f\u6784\u6210\u7d22\u5f15\u7684\u5217\u7684\u7ec4\u5408\u4e2d\uff0c\u4e0d\u53ef\u80fd\u51fa\u73b0\u5168\u7a7a\u503c\u3002"]}),"\n"]}),"\n",(0,d.jsx)(n.h3,{id:"\u524d\u5bfc\u6a21\u7cca\u67e5\u8be2",children:"\u524d\u5bfc\u6a21\u7cca\u67e5\u8be2"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"LIKE"})," \u67e5\u8be2\u4ee5 ",(0,d.jsx)(n.code,{children:"%"})," \u5f00\u5934\u4f1a\u4f7f\u7d22\u5f15\u5931\u6548"]}),"\n"]}),"\n",(0,d.jsx)(n.h3,{id:"\u8fdd\u53cd\u6700\u5de6\u5339\u914d\u539f\u5219",children:"\u8fdd\u53cd\u6700\u5de6\u5339\u914d\u539f\u5219"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"\u4f7f\u7528\u8054\u5408\u7d22\u5f15\u65f6\uff0c\u7f3a\u5931\u5de6\u8fb9\u7684\u7d22\u5f15\u5217\u4f1a\u5bfc\u81f4\u7d22\u5f15\u5931\u6548"}),"\n"]}),"\n",(0,d.jsx)(n.h3,{id:"\u7d22\u5f15\u5217\u4e0a\u4f5c\u64cd\u4f5c",children:"\u7d22\u5f15\u5217\u4e0a\u4f5c\u64cd\u4f5c"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"\u5728\u7d22\u5f15\u5217\u4e0a\u4f5c\u4efb\u4f55\u64cd\u4f5c\uff0c\u5982\u8ba1\u7b97\u3001\u51fd\u6570\u3001\u7c7b\u578b\u8f6c\u6362\u7b49\uff0c\u4f1a\u5bfc\u81f4\u7d22\u5f15\u5931\u6548\u4ece\u800c\u5168\u8868\u626b\u63cf"}),"\n"]}),"\n",(0,d.jsx)(n.h3,{id:"\u8303\u56f4\u67e5\u8be2",children:"\u8303\u56f4\u67e5\u8be2"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"\u7d22\u5f15\u4e2d\u6709\u4e00\u4e2a\u7d22\u5f15\u5217\u7528\u7684\u662f\u5927\u4e8e\u3001\u5c0f\u4e8e\u7b49\u8303\u56f4\u503c\uff0c\u4f1a\u5bfc\u81f4\u8be5\u5217\u4e4b\u540e\u7684\u7d22\u5f15\u5217\u5931\u6548"}),"\n"]}),"\n",(0,d.jsx)(n.h3,{id:"or",children:(0,d.jsx)(n.code,{children:"OR"})}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"OR"})," \u53ef\u80fd\u4f1a\u4f7f\u7d22\u5f15\u5931\u6548\uff0c\u53ef\u5728\u67d0\u4e9b\u573a\u666f\u4e0b\u4f7f\u7528 ",(0,d.jsx)(n.code,{children:"UNION"})," \u4ee3\u66ff"]}),"\n"]}),"\n",(0,d.jsx)(n.h3,{id:"not-in",children:(0,d.jsx)(n.code,{children:"NOT IN"})}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"NOT IN"})," \u53ef\u80fd\u4f1a\u4f7f\u7d22\u5f15\u5931\u6548\uff0c",(0,d.jsx)(n.code,{children:"5.7"})," \u4e2d\u662f\u5168\u8868\u626b\u63cf\uff0c",(0,d.jsx)(n.code,{children:"5.8"})," \u4e2d\u4f7f\u7528\u4e86 ",(0,d.jsx)(n.code,{children:"range"})," \u7c7b\u578b\u7d22\u5f15"]}),"\n"]}),"\n",(0,d.jsxs)(n.h3,{id:"--",children:[(0,d.jsx)(n.code,{children:"!="})," / ",(0,d.jsx)(n.code,{children:"<>"})]}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"!="})," / ",(0,d.jsx)(n.code,{children:"<>"})," \u53ef\u80fd\u4f1a\u4f7f\u7d22\u5f15\u5931\u6548\uff0c",(0,d.jsx)(n.code,{children:"5.7"})," \u4e2d\u662f\u5168\u8868\u626b\u63cf\uff0c",(0,d.jsx)(n.code,{children:"5.8"})," \u4e2d\u4f7f\u7528\u4e86 ",(0,d.jsx)(n.code,{children:"range"})," \u7c7b\u578b\u7d22\u5f15"]}),"\n"]}),"\n",(0,d.jsx)(n.h3,{id:"\u7c7b\u578b\u7f16\u7801\u4e0d\u4e00\u81f4",children:"\u7c7b\u578b/\u7f16\u7801\u4e0d\u4e00\u81f4"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"\u9690\u5f0f\u7684\u7c7b\u578b\u8f6c\u6362\u4f1a\u5bfc\u81f4\u7d22\u5f15\u5931\u6548\uff0c\u8fdb\u884c\u5168\u8868\u626b\u63cf"}),"\n"]}),"\n",(0,d.jsx)(n.h2,{id:"\u9501",children:"\u9501"}),"\n",(0,d.jsxs)(n.blockquote,{children:["\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.code,{children:"MySQL"})," \u9501\u53ef\u4ee5\u6309\u4f7f\u7528\u65b9\u5f0f\u5206\u4e3a\uff1a\u4e50\u89c2\u9501\u4e0e\u60b2\u89c2\u9501\uff0c\u6309\u7c92\u5ea6\u5206\u53ef\u4ee5\u5206\u4e3a\u5168\u5c40\u9501\u3001\u8868\u7ea7\u9501\u3001\u884c\u7ea7\u9501\u3001\u9875\u7ea7\u9501\u3002"]}),"\n"]}),"\n",(0,d.jsx)(n.h3,{id:"\u5168\u5c40\u9501",children:"\u5168\u5c40\u9501"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["\u5168\u5c40\u9501\u5c31\u662f\u5bf9\u6574\u4e2a\u6570\u636e\u5e93\u5b9e\u4f8b\u52a0\u9501\u3002MySQL\u63d0\u4f9b\u4e86\u4e00\u4e2a\u52a0\u5168\u5c40\u8bfb\u9501\u7684\u65b9\u6cd5\uff0c\u547d\u4ee4\u662f ",(0,d.jsx)(n.code,{children:"FLUSH TABLES WITH READ LOCK"}),"\u3002\u5f53\u9700\u8981\u8ba9\u6574\u4e2a\u5e93\u5904\u4e8e\u53ea\u8bfb\u72b6\u6001\u7684\u65f6\u5019\uff0c\u53ef\u4ee5\u4f7f\u7528\u8fd9\u4e2a\u547d\u4ee4\uff0c\u4e4b\u540e\u5176\u4ed6\u7ebf\u7a0b\u7684\u4ee5\u4e0b\u8bed\u53e5\u4f1a\u88ab\u963b\u585e\uff1a\u6570\u636e\u66f4\u65b0\u8bed\u53e5\uff08\u6570\u636e\u7684\u589e\u5220\u6539\uff09\u3001\u6570\u636e\u5b9a\u4e49\u8bed\u53e5\uff08\u5305\u62ec\u5efa\u8868\u3001\u4fee\u6539\u8868\u7ed3\u6784\u7b49\uff09\u548c\u66f4\u65b0\u7c7b\u4e8b\u52a1\u7684\u63d0\u4ea4\u8bed\u53e5"]}),"\n",(0,d.jsxs)(n.li,{children:["\u5168\u5c40\u9501\u7684\u5178\u578b\u4f7f\u7528\u573a\u666f\u662f\u505a\u5168\u5e93\u903b\u8f91\u5907\u4efd\uff0c\u4e5f\u5c31\u662f\u628a\u6574\u5e93\u6bcf\u4e2a\u8868\u90fd ",(0,d.jsx)(n.code,{children:"SELECT"})," \u51fa\u6765\u5b58\u6210\u6587\u672c\u3002\u4f46\u662f\u8ba9\u6574\u4e2a\u5e93\u90fd\u53ea\u8bfb\uff0c\u53ef\u80fd\u51fa\u73b0\u4ee5\u4e0b\u95ee\u9898\uff1a","\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"\u5982\u679c\u5728\u4e3b\u5e93\u4e0a\u5907\u4efd\uff0c\u90a3\u4e48\u5728\u5907\u4efd\u671f\u95f4\u90fd\u4e0d\u80fd\u6267\u884c\u66f4\u65b0\uff0c\u4e1a\u52a1\u57fa\u672c\u4e0a\u5c31\u5f97\u505c\u6446"}),"\n",(0,d.jsx)(n.li,{children:"\u5982\u679c\u5728\u4ece\u5e93\u4e0a\u5907\u4efd\uff0c\u90a3\u4e48\u5728\u5907\u4efd\u671f\u95f4\u4ece\u5e93\u4e0d\u80fd\u6267\u884c\u4e3b\u5e93\u540c\u6b65\u8fc7\u6765\u7684binlog\uff0c\u4f1a\u5bfc\u81f4\u4e3b\u4ece\u5ef6\u8fdf"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(n.h3,{id:"\u8868\u7ea7\u9501",children:"\u8868\u7ea7\u9501"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"MySQL"})," \u91cc\u9762\u8868\u7ea7\u522b\u7684\u9501\u6709\u4e24\u79cd\uff1a\u4e00\u79cd\u662f\u8868\u9501\uff0c\u4e00\u79cd\u662f\u5143\u6570\u636e\u9501\uff08meta data lock\uff0cMDL\uff09\u3002","\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"\u5f00\u9500\u5c0f\uff0c\u52a0\u9501\u5feb\uff1b\u4e0d\u4f1a\u51fa\u73b0\u6b7b\u9501\uff1b\u9501\u5b9a\u7c92\u5ea6\u5927\uff0c\u53d1\u751f\u9501\u51b2\u7a81\u7684\u6982\u7387\u6700\u9ad8\uff0c\u5e76\u53d1\u5ea6\u6700\u4f4e"}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"MySQL"})," \u8868\u7ea7\u9501\u6709\u4e24\u79cd\u6a21\u5f0f\uff1a\u8868\u5171\u4eab\u9501\uff08Table Read Lock\uff09\u548c\u8868\u72ec\u5360\u5199\u9501\uff08Table Write Lock\uff09\u3002","\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["\u5bf9 ",(0,d.jsx)(n.code,{children:"MyISAM"})," \u7684\u8bfb\u64cd\u4f5c\uff0c\u4e0d\u4f1a\u963b\u585e\u5176\u4ed6\u7528\u6237\u5bf9\u540c\u4e00\u8868\u8bf7\u6c42\uff0c\u4f46\u4f1a\u963b\u585e\u5bf9\u540c\u4e00\u8868\u7684\u5199\u8bf7\u6c42\uff1b"]}),"\n",(0,d.jsxs)(n.li,{children:["\u5bf9 ",(0,d.jsx)(n.code,{children:"MyISAM"})," \u7684\u5199\u64cd\u4f5c\uff0c\u5219\u4f1a\u963b\u585e\u5176\u4ed6\u7528\u6237\u5bf9\u540c\u4e00\u8868\u7684\u8bfb\u548c\u5199\u64cd\u4f5c\uff1b"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"MyISAM"})," \u8868\u7684\u8bfb\u64cd\u4f5c\u548c\u5199\u64cd\u4f5c\u4e4b\u95f4\uff0c\u4ee5\u53ca\u5199\u64cd\u4f5c\u4e4b\u95f4\u662f\u4e32\u884c\u7684\u3002"]}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(n.li,{children:"\u5f53\u4e00\u4e2a\u7ebf\u7a0b\u83b7\u5f97\u5bf9\u4e00\u4e2a\u8868\u7684\u5199\u9501\u540e\uff0c\u53ea\u6709\u6301\u6709\u9501\u7ebf\u7a0b\u53ef\u4ee5\u5bf9\u8868\u8fdb\u884c\u66f4\u65b0\u64cd\u4f5c\u3002\u5176\u4ed6\u7ebf\u7a0b\u7684\u8bfb\u3001\u5199\u64cd\u4f5c\u90fd\u4f1a\u7b49\u5f85\uff0c\u76f4\u5230\u9501\u88ab\u91ca\u653e\u4e3a\u6b62\u3002"}),"\n"]}),"\n",(0,d.jsx)(n.h3,{id:"\u884c\u7ea7\u9501",children:"\u884c\u7ea7\u9501"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["\u884c\u7ea7\u9501\u662f ",(0,d.jsx)(n.code,{children:"MySQL"})," \u4e2d\u9501\u5b9a\u7c92\u5ea6\u6700\u7ec6\u7684\u4e00\u79cd\u9501\uff0c\u8868\u793a\u53ea\u9488\u5bf9\u5f53\u524d\u64cd\u4f5c\u7684\u884c\u8fdb\u884c\u52a0\u9501\u3002\u884c\u7ea7\u9501\u80fd\u5927\u5927\u51cf\u5c11\u6570\u636e\u5e93\u64cd\u4f5c\u7684\u51b2\u7a81\u3002\u5176\u52a0\u9501\u7c92\u5ea6\u6700\u5c0f\uff0c\u4f46\u52a0\u9501\u7684\u5f00\u9500\u4e5f\u6700\u5927\u3002\u884c\u7ea7\u9501\u5206\u4e3a ",(0,d.jsx)(n.code,{children:"\u5171\u4eab\u9501"})," \u548c ",(0,d.jsx)(n.code,{children:"\u6392\u4ed6\u9501"}),"\u3002","\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"\u5f00\u9500\u5927\uff0c\u52a0\u9501\u6162\uff1b\u4f1a\u51fa\u73b0\u6b7b\u9501\uff1b\u9501\u5b9a\u7c92\u5ea6\u6700\u5c0f\uff0c\u53d1\u751f\u9501\u51b2\u7a81\u7684\u6982\u7387\u6700\u4f4e\uff0c\u5e76\u53d1\u5ea6\u4e5f\u6700\u9ad8"}),"\n",(0,d.jsxs)(n.li,{children:["\u57fa\u4e8e\u7d22\u5f15\uff0c\u5982\u679c ",(0,d.jsx)(n.code,{children:"sql"})," \u6ca1\u6709\u8d70\u7d22\u5f15\uff0c\u5c06\u4f1a\u9000\u5316\u4e3a\u8868\u9501"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(n.h3,{id:"\u9875\u7ea7\u9501",children:"\u9875\u7ea7\u9501"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["\u9875\u7ea7\u9501\u662f ",(0,d.jsx)(n.code,{children:"MySQL"})," \u4e2d\u9501\u5b9a\u7c92\u5ea6\u4ecb\u4e8e\u884c\u7ea7\u9501\u548c\u8868\u7ea7\u9501\u4e2d\u95f4\u7684\u4e00\u79cd\u9501\u3002\u8868\u7ea7\u9501\u901f\u5ea6\u5feb\uff0c\u4f46\u51b2\u7a81\u591a\uff0c\u884c\u7ea7\u51b2\u7a81\u5c11\uff0c\u4f46\u901f\u5ea6\u6162\u3002\u6240\u4ee5\u53d6\u4e86\u6298\u8877\u7684\u9875\u7ea7\uff0c\u4e00\u6b21\u9501\u5b9a\u76f8\u90bb\u7684\u4e00\u7ec4\u8bb0\u5f55\u3002",(0,d.jsx)(n.code,{children:"BDB"})," \u652f\u6301\u9875\u7ea7\u9501\u3002","\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"\u5f00\u9500\u548c\u52a0\u9501\u65f6\u95f4\u754c\u4e8e\u8868\u9501\u548c\u884c\u9501\u4e4b\u95f4\uff1b\u4f1a\u51fa\u73b0\u6b7b\u9501\uff1b\u9501\u5b9a\u7c92\u5ea6\u754c\u4e8e\u8868\u9501\u548c\u884c\u9501\u4e4b\u95f4\uff0c\u5e76\u53d1\u5ea6\u4e00\u822c"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(n.h3,{id:"\u663e\u5f0f\u52a0\u9501",children:"\u663e\u5f0f\u52a0\u9501"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-sql",children:"-- \u5171\u4eab\u9501\nSELECT ... LOCK IN SHARE MODE\n-- \u6392\u4ed6\u9501\nSELECT ... FOR UPDATE\n"})}),"\n",(0,d.jsx)(n.h3,{id:"\u60b2\u89c2\u9501",children:"\u60b2\u89c2\u9501"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["\u60b2\u89c2\u9501\uff08",(0,d.jsx)(n.code,{children:"Pessimistic Lock"}),"\uff09\uff0c\u987e\u540d\u601d\u4e49\uff0c\u5c31\u662f\u5f88\u60b2\u89c2\uff0c\u6bcf\u6b21\u53bb\u62ff\u6570\u636e\u7684\u65f6\u5019\u90fd\u8ba4\u4e3a\u522b\u4eba\u4f1a\u4fee\u6539\uff0c\u6240\u4ee5\u6bcf\u6b21\u5728\u62ff\u6570\u636e\u7684\u65f6\u5019\u90fd\u4f1a\u4e0a\u9501\uff0c\u8fd9\u6837\u522b\u4eba\u60f3\u62ff\u8fd9\u4e2a\u6570\u636e\u5c31\u4f1a ",(0,d.jsx)(n.code,{children:"block"})," \u76f4\u5230\u5b83\u62ff\u5230\u9501\u3002","\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"\u60b2\u89c2\u9501\uff1a\u5047\u5b9a\u4f1a\u53d1\u751f\u5e76\u53d1\u51b2\u7a81\uff0c\u5c4f\u853d\u4e00\u5207\u53ef\u80fd\u8fdd\u53cd\u6570\u636e\u5b8c\u6574\u6027\u7684\u64cd\u4f5c\u3002"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(n.h3,{id:"\u4e50\u89c2\u9501",children:"\u4e50\u89c2\u9501"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["\u4e50\u89c2\u9501\uff08",(0,d.jsx)(n.code,{children:"Optimistic Lock"}),"\uff09\uff0c\u987e\u540d\u601d\u4e49\uff0c\u5c31\u662f\u5f88\u4e50\u89c2\uff0c\u6bcf\u6b21\u53bb\u62ff\u6570\u636e\u7684\u65f6\u5019\u90fd\u8ba4\u4e3a\u522b\u4eba\u4e0d\u4f1a\u4fee\u6539\uff0c\u6240\u4ee5\u4e0d\u4f1a\u4e0a\u9501\uff0c\u4f46\u662f\u5728\u63d0\u4ea4\u66f4\u65b0\u7684\u65f6\u5019\u4f1a\u5224\u65ad\u4e00\u4e0b\u5728\u6b64\u671f\u95f4\u522b\u4eba\u6709\u6ca1\u6709\u53bb\u66f4\u65b0\u8fd9\u4e2a\u6570\u636e\u3002\u4e50\u89c2\u9501\u9002\u7528\u4e8e\u8bfb\u591a\u5199\u5c11\u7684\u5e94\u7528\u573a\u666f\uff0c\u8fd9\u6837\u53ef\u4ee5\u63d0\u9ad8\u541e\u5410\u91cf\u3002","\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"\u4e50\u89c2\u9501\uff1a\u5047\u8bbe\u4e0d\u4f1a\u53d1\u751f\u5e76\u53d1\u51b2\u7a81\uff0c\u53ea\u5728\u63d0\u4ea4\u64cd\u4f5c\u65f6\u68c0\u67e5\u662f\u5426\u8fdd\u53cd\u6570\u636e\u5b8c\u6574\u6027\u3002"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(n.h2,{id:"myisam-vs-innodb",children:[(0,d.jsx)(n.code,{children:"MyISAM"})," vs. ",(0,d.jsx)(n.code,{children:"InnoDB"})]}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["\u4e8b\u52a1\uff1a",(0,d.jsx)(n.code,{children:"MyISAM"})," \u4e0d\u652f\u6301\uff1b",(0,d.jsx)(n.code,{children:"InnoDB"})," \u652f\u6301"]}),"\n",(0,d.jsxs)(n.li,{children:["\u9501\uff1a",(0,d.jsx)(n.code,{children:"MyISAM"})," \u652f\u6301\u8868\u9501\uff1b",(0,d.jsx)(n.code,{children:"InnoDB"})," \u652f\u6301\u884c\u9501\u3001\u8868\u9501"]}),"\n",(0,d.jsxs)(n.li,{children:["\u4e3b\u952e\uff1a",(0,d.jsx)(n.code,{children:"MyISAM"})," \u53ef\u4ee5\u6ca1\u6709\u4e3b\u952e\uff1b",(0,d.jsx)(n.code,{children:"InnoDB"})," \u5fc5\u987b\u6709\uff0c\u6ca1\u6709\u6307\u5b9a\u4f1a\u9ed8\u8ba4\u751f\u6210\u4e00\u4e2a\u9690\u85cf\u5217\u4f5c\u4e3a\u4e3b\u952e"]}),"\n",(0,d.jsxs)(n.li,{children:["\u7d22\u5f15\uff1a",(0,d.jsx)(n.code,{children:"MyISAM"})," \u4e3a\u975e\u805a\u96c6\u7d22\u5f15\uff0c\u4f7f\u7528 B+ \u6811\u4f5c\u4e3a\u7d22\u5f15\u7ed3\u6784\uff0c\u7d22\u5f15\u548c\u6570\u636e\u6587\u4ef6\u662f\u5206\u79bb\u7684\uff0c\u4e3b\u952e\u7d22\u5f15\u548c\u8f85\u52a9\u7d22\u5f15\u662f\u72ec\u7acb\u7684\uff1b",(0,d.jsx)(n.code,{children:"InnoDB"})," \u4e3a\u805a\u96c6\u7d22\u5f15\uff0c\u4f7f\u7528 B+ \u6811\u4f5c\u4e3a\u7d22\u5f15\u7ed3\u6784\uff0c\u6570\u636e\u6587\u4ef6\u548c\u7d22\u5f15\u7ed1\u5728\u4e00\u8d77\uff0c\u5fc5\u987b\u8981\u6709\u4e3b\u952e\uff0c\u4e3b\u952e\u7d22\u5f15\u4e00\u6b21\u67e5\u8be2\uff0c\u8f85\u52a9\u7d22\u5f15\u4e24\u6b21\u67e5\u8be2\uff0c\u5148\u67e5\u8be2\u4e3b\u952e\uff0c\u518d\u67e5\u8be2\u6570\u636e"]}),"\n",(0,d.jsxs)(n.li,{children:["\u5916\u952e\uff1a",(0,d.jsx)(n.code,{children:"MyISAM"})," \u4e0d\u652f\u6301\uff1b",(0,d.jsx)(n.code,{children:"InnoDB"})," \u652f\u6301"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"AUTO_INCREMENT"}),"\uff1a",(0,d.jsx)(n.code,{children:"MyISAM"})," \u81ea\u589e\u5217\u5982\u679c\u5904\u4e8e\u7ec4\u5408\u7d22\u5f15\uff0c\u81ea\u589e\u5217\u53ef\u4ee5\u4e0d\u662f\u7b2c\u4e00\u5217\uff0c\u53ef\u4ee5\u6839\u636e\u7ec4\u5408\u7d22\u5f15\u5de6\u8fb9\u7684\u5217\u8fdb\u884c\u6392\u5e8f\u540e\u9012\u589e\uff1b",(0,d.jsx)(n.code,{children:"InnoDB"})," \u5fc5\u987b\u5305\u542b\u53ea\u6709\u81ea\u589e\u5217\u7684\u7d22\u5f15\uff0c\u5982\u679c\u81ea\u589e\u5217\u5904\u4e8e\u7ec4\u5408\u7d22\u5f15\uff0c\u4e5f\u5fc5\u987b\u662f\u7ec4\u5408\u7d22\u5f15\u7684\u6700\u5de6\u5217"]}),"\n",(0,d.jsxs)(n.li,{children:["\u8868\u7684\u884c\u6570\uff1a",(0,d.jsx)(n.code,{children:"MyISAM"})," \u4fdd\u5b58\u4e86\u8868\u7684\u884c\u6570\uff1b",(0,d.jsx)(n.code,{children:"InnoDB"})," \u6ca1\u6709\u4fdd\u5b58\u8868\u7684\u884c\u6570"]}),"\n",(0,d.jsxs)(n.li,{children:["\u5168\u6587\u7d22\u5f15\uff1a",(0,d.jsx)(n.code,{children:"MyISAM"})," \u652f\u6301\uff0c",(0,d.jsx)(n.code,{children:"InnoDB"})," 5.7+(\u542b)\u652f\u6301"]}),"\n"]}),"\n",(0,d.jsxs)(n.h2,{id:"mysql-\u65e5\u5fd7",children:[(0,d.jsx)(n.code,{children:"MySQL"})," \u65e5\u5fd7"]}),"\n",(0,d.jsxs)(n.blockquote,{children:["\n",(0,d.jsxs)(n.p,{children:["\u65e5\u5fd7\u662f ",(0,d.jsx)(n.code,{children:"MySQL"})," \u6570\u636e\u5e93\u7684\u91cd\u8981\u7ec4\u6210\u90e8\u5206\u3002\u65e5\u5fd7\u6587\u4ef6\u4e2d\u8bb0\u5f55\u7740 ",(0,d.jsx)(n.code,{children:"MySQL"})," \u6570\u636e\u5e93\u8fd0\u884c\u671f\u95f4\u53d1\u751f\u7684\u53d8\u5316\uff0c\u6bd4\u5982\u5ba2\u6237\u7aef\u8fde\u63a5\u72b6\u51b5\u3001",(0,d.jsx)(n.code,{children:"SQL"})," \u8bed\u53e5\u7684\u6267\u884c\u60c5\u51b5\u548c\u9519\u8bef\u4fe1\u606f\u7b49\u3002\u5f53\u6570\u636e\u5e93\u906d\u5230\u610f\u5916\u7684\u635f\u574f\u65f6\uff0c\u53ef\u4ee5\u901a\u8fc7\u65e5\u5fd7\u67e5\u770b\u6587\u4ef6\u51fa\u9519\u7684\u539f\u56e0\uff0c\u5e76\u4e14\u53ef\u4ee5\u901a\u8fc7\u65e5\u5fd7\u6587\u4ef6\u8fdb\u884c\u6570\u636e\u6062\u590d\u3002",(0,d.jsx)(n.code,{children:"MySQL"})," \u65e5\u5fd7\u4e3b\u8981\u5305\u542b\uff1a\u9519\u8bef\u65e5\u5fd7\u3001\u67e5\u8be2\u65e5\u5fd7\u3001\u6162\u67e5\u8be2\u65e5\u5fd7\u3001\u4e8c\u8fdb\u5236\u65e5\u5fd7\u3001\u91cd\u505a\u65e5\u5fd7\u3001\u56de\u6eda\u65e5\u5fd7\u7b49\uff0c\u5176\u4e2d\u91cd\u505a\u65e5\u5fd7\u548c\u56de\u6eda\u65e5\u5fd7\u4e5f\u79f0\u4e8b\u52a1\u65e5\u5fd7(",(0,d.jsx)(n.code,{children:"InnoDB"}),")\u3002"]}),"\n"]}),"\n",(0,d.jsxs)(n.h3,{id:"\u9519\u8bef\u65e5\u5fd7errorlog",children:["\u9519\u8bef\u65e5\u5fd7(",(0,d.jsx)(n.code,{children:"errorlog"}),")"]}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["\u9519\u8bef\u65e5\u5fd7\u529f\u80fd\u662f\u9ed8\u8ba4\u5f00\u542f\u7684\uff0c\u5e76\u4e14\u9519\u8bef\u65e5\u5fd7\u65e0\u6cd5\u88ab\u7981\u6b62\u3002\u9519\u8bef\u65e5\u5fd7\u8bb0\u5f55\u7740 ",(0,d.jsx)(n.code,{children:"MySQL"})," \u542f\u52a8\u548c\u505c\u6b62\uff0c\u4ee5\u53ca\u670d\u52a1\u5668\u5728\u8fd0\u884c\u8fc7\u7a0b\u4e2d\u53d1\u751f\u7684\u9519\u8bef\u7684\u76f8\u5173\u4fe1\u606f\u3002","\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["\u672a\u663e\u5f0f\u6307\u5b9a\u5f00\u542f\u65f6\uff0c\u9519\u8bef\u65e5\u5fd7\u5c06\u88ab\u5199\u5165\u6807\u51c6\u9519\u8bef\u8f93\u51fa ",(0,d.jsx)(n.code,{children:"stderr"}),"\u3002"]}),"\n",(0,d.jsxs)(n.li,{children:["\u901a\u8fc7\u914d\u7f6e\u6587\u4ef6\u4e2d ",(0,d.jsx)(n.code,{children:"log-error"})," \u9009\u9879\u663e\u5f0f\u5f00\u542f\uff0c\u5e76\u53ef\u901a\u8fc7\u8be5\u9009\u9879\u6307\u5b9a\u65e5\u5fd7\u5b58\u50a8\u6587\u4ef6\u3002"]}),"\n",(0,d.jsxs)(n.li,{children:["\u5982\u672a\u6307\u5b9a\u65e5\u5fd7\u5b58\u50a8\u6587\u4ef6\uff0c\u9519\u8bef\u65e5\u5fd7\u5c06\u88ab\u5199\u5165\u6570\u636e\u76ee\u5f55\u4e0b ",(0,d.jsx)(n.code,{children:"host_name.err"})," \u6587\u4ef6\u4e2d\uff0c",(0,d.jsx)(n.code,{children:"host_name"})," \u4e3a ",(0,d.jsx)(n.code,{children:"MySQL"})," \u670d\u52a1\u5668\u4e3b\u673a\u540d\u3002"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(n.h3,{id:"\u67e5\u8be2\u65e5\u5fd7general-log",children:["\u67e5\u8be2\u65e5\u5fd7(",(0,d.jsx)(n.code,{children:"general log"}),")"]}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["\u67e5\u8be2\u65e5\u5fd7\u529f\u80fd\u662f\u9ed8\u8ba4\u5173\u95ed\u7684\u3002\u67e5\u8be2\u65e5\u5fd7\u4f1a\u8bb0\u5f55\u7528\u6237\u7684\u6240\u6709\u64cd\u4f5c\u3002","\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["\u67e5\u8be2\u65e5\u5fd7\u5728\u5e76\u53d1\u64cd\u4f5c\u5927\u7684\u73af\u5883\u4e0b\u4f1a\u4ea7\u751f\u5927\u91cf\u7684\u4fe1\u606f\u4ece\u800c\u5bfc\u81f4\u4e0d\u5fc5\u8981\u7684",(0,d.jsx)(n.code,{children:"\u78c1\u76d8IO"}),"\uff0c\u4f1a\u5f71\u54cd\u6570\u636e\u5e93\u6027\u80fd\u7684\uff0c\u5efa\u8bae\u4ec5\u5728\u4e3a\u4e86\u8c03\u8bd5\u6570\u636e\u5e93\u7684\u76ee\u7684\u4e0b\u5f00\u542f\u67e5\u8be2\u65e5\u5fd7\u3002"]}),"\n",(0,d.jsxs)(n.li,{children:["\u901a\u8fc7\u914d\u7f6e\u6587\u4ef6\u4e2d ",(0,d.jsx)(n.code,{children:"general_log = ON"})," \u9009\u9879\u5f00\u542f\uff0c\u901a\u8fc7\u914d\u7f6e\u6587\u4ef6\u4e2d ",(0,d.jsx)(n.code,{children:"log_output = TABLE|FILE"})," \u6307\u5b9a\u65e5\u5fd7\u5b58\u50a8\u65b9\u5f0f\u3002"]}),"\n",(0,d.jsxs)(n.li,{children:["\u5982\u679c ",(0,d.jsx)(n.code,{children:"log_output = TABLE"}),"\uff0c\u65e5\u5fd7\u5b58\u50a8\u5728 ",(0,d.jsx)(n.code,{children:"MySQL.gengera_log"})," \u8868\u4e2d\u3002"]}),"\n",(0,d.jsxs)(n.li,{children:["\u5982\u679c ",(0,d.jsx)(n.code,{children:"log_output = FILE"}),"\uff0c\u901a\u8fc7\u914d\u7f6e\u6587\u4ef6\u4e2d ",(0,d.jsx)(n.code,{children:"general_log_file"})," \u6307\u5b9a\u65e5\u5fd7\u5b58\u50a8\u6587\u4ef6\u3002"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(n.h3,{id:"\u6162\u67e5\u8be2\u65e5\u5fd7slow-query-log",children:["\u6162\u67e5\u8be2\u65e5\u5fd7(",(0,d.jsx)(n.code,{children:"slow query log"}),")"]}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["\u6162\u67e5\u8be2\u65e5\u5fd7\u529f\u80fd\u662f\u9ed8\u8ba4\u5173\u95ed\u7684\u3002\u6162\u67e5\u8be2\u65e5\u5fd7\u7528\u6765\u8bb0\u5f55\u6267\u884c\u65f6\u95f4\u8d85\u8fc7\u6307\u5b9a\u65f6\u95f4\u7684\u67e5\u8be2\u8bed\u53e5\u3002","\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"\u901a\u8fc7\u6162\u67e5\u8be2\u65e5\u5fd7\uff0c\u53ef\u4ee5\u67e5\u627e\u51fa\u54ea\u4e9b\u67e5\u8be2\u8bed\u53e5\u7684\u6267\u884c\u6548\u7387\u5f88\u4f4e\uff0c\u4ee5\u4fbf\u8fdb\u884c\u4f18\u5316\u3002"}),"\n",(0,d.jsxs)(n.li,{children:["\u4e00\u822c\u5efa\u8bae\u5f00\u542f\uff0c\u5b83\u5bf9\u670d\u52a1\u5668\u6027\u80fd\u7684\u5f71\u54cd\u5fae\u4e4e\u5176\u5fae\uff0c\u4f46\u662f\u53ef\u4ee5\u8bb0\u5f55 ",(0,d.jsx)(n.code,{children:"MySQL"})," \u670d\u52a1\u5668\u4e0a\u6267\u884c\u4e86\u5f88\u957f\u65f6\u95f4\u7684\u67e5\u8be2\u8bed\u53e5\uff0c\u53ef\u4ee5\u5e2e\u52a9\u5b9a\u4f4d\u6027\u80fd\u95ee\u9898\u3002"]}),"\n",(0,d.jsxs)(n.li,{children:["\u901a\u8fc7\u914d\u7f6e\u6587\u4ef6\u4e2d ",(0,d.jsx)(n.code,{children:"slow_query_log"})," \u9009\u9879\u5f00\u542f\u6162\u67e5\u8be2\u65e5\u5fd7\u3002"]}),"\n",(0,d.jsxs)(n.li,{children:["\u901a\u8fc7\u914d\u7f6e\u6587\u4ef6\u4e2d ",(0,d.jsx)(n.code,{children:"slow-query-log-file"})," \u9009\u9879\u6307\u5b9a\u6162\u67e5\u8be2\u65e5\u5fd7\u5b58\u50a8\u6587\u4ef6\u3002"]}),"\n",(0,d.jsxs)(n.li,{children:["\u901a\u8fc7\u914d\u7f6e\u6587\u4ef6\u4e2d ",(0,d.jsx)(n.code,{children:"long_query_time"})," \u9009\u9879\u6307\u5b9a\u5224\u5b9a\u6162\u67e5\u8be2\u7684\u65f6\u95f4\u9608\u503c\uff0c\u65f6\u95f4\u4ee5\u79d2\u4e3a\u5355\u4f4d\uff0c\u53ef\u4ee5\u7cbe\u786e\u5230\u5fae\u79d2\u3002"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(n.h3,{id:"\u4e8c\u8fdb\u5236\u65e5\u5fd7",children:"\u4e8c\u8fdb\u5236\u65e5\u5fd7"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["\u4e8c\u8fdb\u5236\u65e5\u5fd7\u4e5f\u53eb\u4f5c\u53d8\u66f4\u65e5\u5fd7\uff0c\u4e3b\u8981\u7528\u4e8e\u8bb0\u5f55\u4fee\u6539\u6570\u636e\u6216\u6709\u53ef\u80fd\u5f15\u8d77\u6570\u636e\u6539\u53d8\u7684 ",(0,d.jsx)(n.code,{children:"SQL"})," \u8bed\u53e5\uff0c\u5e76\u4e14\u8bb0\u5f55\u4e86\u8bed\u53e5\u53d1\u751f\u65f6\u95f4\u3001\u6267\u884c\u65f6\u957f\u3001\u64cd\u4f5c\u7684\u6570\u636e\u7b49\u3002","\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["\u901a\u8fc7\u914d\u7f6e\u6587\u4ef6\u4e2d ",(0,d.jsx)(n.code,{children:"log_bin = ON|file_name"})," \u9009\u9879\u5f00\u542f\u6216\u540c\u65f6\u6307\u5b9a\u4e8c\u8fdb\u5236\u65e5\u5fd7\u5b58\u50a8\u76ee\u5f55/\u6587\u4ef6\u3002"]}),"\n",(0,d.jsxs)(n.li,{children:["\u5185\u5bb9\u662f\u903b\u8f91\u683c\u5f0f\u65e5\u5fd7\uff0c\u53ef\u7528\u4e8e\u5728\u4e3b\u4ece\u590d\u5236\u4e2d\u4ece\u5e93\u5229\u7528\u4e3b\u5e93\u4e0a\u7684 ",(0,d.jsx)(n.code,{children:"binlog"})," \u8fdb\u884c\u91cd\u64ad\u5b9e\u73b0\u4e3b\u4ece\u540c\u6b65\uff0c\u4e5f\u53ef\u7528\u4e8e\u6570\u636e\u5e93\u57fa\u4e8e\u65f6\u95f4\u70b9\u7684\u8fd8\u539f\u3002"]}),"\n",(0,d.jsxs)(n.li,{children:["\u4e8b\u52a1\u63d0\u4ea4\u65f6\u4ea7\u751f\u8bb0\u5f55\uff0c\u751f\u6210\u65f6\u95f4\u8d85\u8fc7 ",(0,d.jsx)(n.code,{children:"expire_logs_days"})," \u914d\u7f6e\u7684\u5929\u6570\u4e4b\u540e\uff0c\u4f1a\u88ab\u81ea\u52a8\u5220\u9664\u3002"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(n.h3,{id:"\u91cd\u505a\u65e5\u5fd7redo-log",children:["\u91cd\u505a\u65e5\u5fd7(",(0,d.jsx)(n.code,{children:"redo log"}),")"]}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["\u786e\u4fdd\u4e8b\u52a1\u7684\u6301\u4e45\u6027\u3002",(0,d.jsx)(n.code,{children:"redo"})," \u65e5\u5fd7\u8bb0\u5f55\u4e8b\u52a1\u6267\u884c\u540e\u7684\u72b6\u6001\uff0c\u7528\u6765\u6062\u590d\u672a\u5199\u5165 ",(0,d.jsx)(n.code,{children:"data file"})," \u7684\u5df2\u6210\u529f\u4e8b\u52a1\u66f4\u65b0\u7684\u6570\u636e\u3002\u9632\u6b62\u5728\u53d1\u751f\u6545\u969c\u7684\u65f6\u95f4\u70b9\uff0c\u5c1a\u6709\u810f\u9875\u672a\u5199\u5165\u78c1\u76d8\uff0c\u5728\u91cd\u542f ",(0,d.jsx)(n.code,{children:"MySQL"})," \u670d\u52a1\u7684\u65f6\u5019\uff0c\u6839\u636e ",(0,d.jsx)(n.code,{children:"redo log"})," \u8fdb\u884c\u91cd\u505a\uff0c\u4ece\u800c\u8fbe\u5230\u4e8b\u52a1\u7684\u6301\u4e45\u6027\u8fd9\u4e00\u7279\u6027\u3002","\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["\u5185\u5bb9\u662f\u7269\u7406\u683c\u5f0f\u7684\u65e5\u5fd7\uff0c\u8bb0\u5f55\u7684\u662f\u7269\u7406\u6570\u636e\u9875\u9762\u7684\u4fee\u6539\u7684\u4fe1\u606f\uff0c\u5176 ",(0,d.jsx)(n.code,{children:"redo log"})," \u662f\u987a\u5e8f\u5199\u5165 ",(0,d.jsx)(n.code,{children:"redo log file"})," \u7684\u7269\u7406\u6587\u4ef6\u4e2d\u53bb\u7684\u3002"]}),"\n",(0,d.jsxs)(n.li,{children:["\u4e8b\u52a1\u5f00\u59cb\u540e\u5c31\u4f1a\u4ea7\u751f ",(0,d.jsx)(n.code,{children:"redo log"}),"\uff0c",(0,d.jsx)(n.code,{children:"redo log"})," \u7684\u843d\u76d8\u5e76\u4e0d\u662f\u968f\u7740\u4e8b\u52a1\u7684\u63d0\u4ea4\u624d\u5199\u5165\u7684\uff0c\u800c\u662f\u5728\u4e8b\u52a1\u7684\u6267\u884c\u8fc7\u7a0b\u4e2d\uff0c\u4fbf\u5f00\u59cb\u5199\u5165 ",(0,d.jsx)(n.code,{children:"redo log"})," \u6587\u4ef6\u4e2d\u3002"]}),"\n",(0,d.jsxs)(n.li,{children:["\u5f53\u5bf9\u5e94\u4e8b\u52a1\u7684\u810f\u9875\u5199\u5165\u5230\u78c1\u76d8\u4e4b\u540e\uff0c",(0,d.jsx)(n.code,{children:"redo log"})," \u7684\u4f7f\u547d\u4e5f\u5c31\u5b8c\u6210\u4e86\uff0c\u91cd\u505a\u65e5\u5fd7\u5360\u7528\u7684\u7a7a\u95f4\u5c31\u53ef\u4ee5\u91cd\u7528\uff08\u88ab\u8986\u76d6\uff09\u3002"]}),"\n",(0,d.jsxs)(n.li,{children:["\u901a\u8fc7\u914d\u7f6e\u6587\u4ef6\u4e2d ",(0,d.jsx)(n.code,{children:"innodb_log_group_home_dir"})," \u9009\u9879\u6307\u5b9a\u65e5\u5fd7\u6587\u4ef6\u7ec4\u6240\u5728\u7684\u8def\u5f84\uff0c\u9ed8\u8ba4./ \uff0c\u8868\u793a\u5728\u6570\u636e\u5e93\u7684\u6570\u636e\u76ee\u5f55\u4e0b\u3002"]}),"\n",(0,d.jsxs)(n.li,{children:["\u901a\u8fc7\u914d\u7f6e\u6587\u4ef6\u4e2d ",(0,d.jsx)(n.code,{children:"innodb_log_files_in_group"})," \u9009\u9879\u6307\u5b9a\u65e5\u5fd7\u6587\u4ef6\u7ec4\u4e2d\u6587\u4ef6\u7684\u6570\u91cf\uff0c\u9ed8\u8ba4 ",(0,d.jsx)(n.code,{children:"2"}),"\u3002"]}),"\n",(0,d.jsxs)(n.li,{children:["\u901a\u8fc7\u914d\u7f6e\u6587\u4ef6\u4e2d ",(0,d.jsx)(n.code,{children:"innodb_log_file_size"})," \u6307\u5b9a\u65e5\u5fd7\u6587\u4ef6\u7684\u5927\u5c0f\u3002"]}),"\n",(0,d.jsxs)(n.li,{children:["\u901a\u8fc7\u914d\u7f6e\u6587\u4ef6\u4e2d ",(0,d.jsx)(n.code,{children:"innodb_mirrored_log_groups"})," \u6307\u5b9a\u65e5\u5fd7\u955c\u50cf\u6587\u4ef6\u7ec4\u7684\u6570\u91cf\uff0c\u9ed8\u8ba4 ",(0,d.jsx)(n.code,{children:"1"}),"\u3002"]}),"\n",(0,d.jsxs)(n.li,{children:["\u91cd\u505a\u65e5\u5fd7\u6709\u4e00\u4e2a\u7f13\u5b58\u533a ",(0,d.jsx)(n.code,{children:"innodb_log_buffer"}),"\uff0c",(0,d.jsx)(n.code,{children:"innodb_log_buffer"})," \u7684\u9ed8\u8ba4\u5927\u5c0f\u4e3a8M\uff0c",(0,d.jsx)(n.code,{children:"Innodb"})," \u5b58\u50a8\u5f15\u64ce\u5148\u5c06\u91cd\u505a\u65e5\u5fd7\u5199\u5165 ",(0,d.jsx)(n.code,{children:"innodb_log_buffer"})," \u4e2d\u3002","\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"Master Thread"})," \u6bcf\u79d2\u4e00\u6b21\u6267\u884c\u5237\u65b0 ",(0,d.jsx)(n.code,{children:"innodb_log_buffer"})," \u5230\u65e5\u5fd7\u6587\u4ef6\u3002"]}),"\n",(0,d.jsx)(n.li,{children:"\u6bcf\u4e2a\u4e8b\u52a1\u63d0\u4ea4\u65f6\u4f1a\u5c06\u91cd\u505a\u65e5\u5fd7\u5237\u65b0\u5230\u91cd\u505a\u65e5\u5fd7\u6587\u4ef6\u3002"}),"\n",(0,d.jsx)(n.li,{children:"\u5f53\u91cd\u505a\u65e5\u5fd7\u7f13\u5b58\u53ef\u7528\u7a7a\u95f4\u5c11\u4e8e\u4e00\u534a\u65f6\uff0c\u91cd\u505a\u65e5\u5fd7\u7f13\u5b58\u88ab\u5237\u65b0\u5230\u91cd\u505a\u65e5\u5fd7\u6587\u4ef6\u3002"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(n.h3,{id:"\u56de\u6eda\u65e5\u5fd7undo-log",children:["\u56de\u6eda\u65e5\u5fd7(",(0,d.jsx)(n.code,{children:"undo log"}),")"]}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["\u4e8b\u52a1\u539f\u5b50\u6027\u548c\u9694\u79bb\u6027\u5b9e\u73b0\u7684\u57fa\u7840\uff0c\u4fdd\u5b58\u4e86\u4e8b\u52a1\u53d1\u751f\u4e4b\u524d\u7684\u6570\u636e\u7684\u4e00\u4e2a\u7248\u672c\uff0c\u53ef\u4ee5\u7528\u4e8e\u56de\u6eda\uff0c\u540c\u65f6\u53ef\u4ee5\u63d0\u4f9b\u591a\u7248\u672c\u5e76\u53d1\u63a7\u5236\u4e0b\u7684\u8bfb\uff08",(0,d.jsx)(n.code,{children:"MVCC"}),"\uff09\uff0c\u4e5f\u5373\u975e\u9501\u5b9a\u8bfb\u3002","\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["\u5185\u5bb9\u662f\u903b\u8f91\u683c\u5f0f\u65e5\u5fd7\uff0c\u5728\u6267\u884c ",(0,d.jsx)(n.code,{children:"undo"})," \u65f6\u4ec5\u5c06\u6570\u636e\u4ece\u903b\u8f91\u4e0a\u6062\u590d\u81f3\u4e8b\u52a1\u4e4b\u524d\u7684\u72b6\u6001\uff0c\u800c\u4e0d\u662f\u4ece\u7269\u7406\u9875\u9762\u4e0a\u64cd\u4f5c\u5b9e\u73b0\u7684\uff08\u4e0d\u540c\u4e8e ",(0,d.jsx)(n.code,{children:"redo log"}),"\uff09\u3002"]}),"\n",(0,d.jsxs)(n.li,{children:["\u4e8b\u52a1\u5f00\u59cb\u4e4b\u524d\uff0c\u5c06\u5f53\u524d\u6570\u636e\u7248\u672c\u751f\u6210 ",(0,d.jsx)(n.code,{children:"undo log"}),"\uff0c",(0,d.jsx)(n.code,{children:"undo"})," \u4e5f\u4f1a\u4ea7\u751f ",(0,d.jsx)(n.code,{children:"redo"})," \u6765\u4fdd\u8bc1 ",(0,d.jsx)(n.code,{children:"undo log"})," \u7684\u53ef\u9760\u6027\u3002"]}),"\n",(0,d.jsxs)(n.li,{children:["\u5f53\u4e8b\u52a1\u63d0\u4ea4\u4e4b\u540e\uff0c",(0,d.jsx)(n.code,{children:"undo log"})," \u5e76\u4e0d\u80fd\u7acb\u9a6c\u88ab\u5220\u9664\uff0c\u800c\u662f\u653e\u5165\u5f85\u6e05\u7406\u7684\u94fe\u8868\uff0c\u7531 ",(0,d.jsx)(n.code,{children:"purge"})," \u7ebf\u7a0b\u5224\u65ad\u662f\u5426\u6709\u5176\u4ed6\u4e8b\u52a1\u5728\u4f7f\u7528 ",(0,d.jsx)(n.code,{children:"undo"})," \u6bb5\u4e2d\u8868\u7684\u4e0a\u4e00\u4e2a\u4e8b\u52a1\u4e4b\u524d\u7684\u7248\u672c\u4fe1\u606f\uff0c\u51b3\u5b9a\u662f\u5426\u53ef\u4ee5\u6e05\u7406 ",(0,d.jsx)(n.code,{children:"undo log"})," \u7684\u65e5\u5fd7\u7a7a\u95f4\u3002"]}),"\n",(0,d.jsxs)(n.li,{children:["\u901a\u8fc7\u914d\u7f6e\u6587\u4ef6\u4e2d ",(0,d.jsx)(n.code,{children:"innodb_data_file_path"})," \u6307\u5b9a\u5171\u4eab\u8868\u7a7a\u95f4\u8def\u5f84\u3002\uff08",(0,d.jsx)(n.code,{children:"5.6-"}),"\uff09"]}),"\n",(0,d.jsxs)(n.li,{children:["\u901a\u8fc7\u914d\u7f6e\u6587\u4ef6\u4e2d ",(0,d.jsx)(n.code,{children:"innodb_undo_directory"})," \u6307\u5b9a\u72ec\u7acb ",(0,d.jsx)(n.code,{children:"undo"})," \u8868\u7a7a\u95f4\u5b58\u50a8\u76ee\u5f55\uff0c\u901a\u8fc7\u914d\u7f6e\u6587\u4ef6\u4e2d ",(0,d.jsx)(n.code,{children:"innodb_undo_logs"})," \u6307\u5b9a\u56de\u6eda\u6bb5\u5927\u5c0f\uff0c\u901a\u8fc7\u914d\u7f6e\u6587\u4ef6\u4e2d ",(0,d.jsx)(n.code,{children:"innodb_undo_tablespaces"})," \u6307\u5b9a ",(0,d.jsx)(n.code,{children:"undo log"})," \u6587\u4ef6\u6570\u91cf\u3002\uff08",(0,d.jsx)(n.code,{children:"5.7+"}),"\uff09"]}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"undo log"})," \u4e3b\u8981\u5206\u4e3a\u4e24\u79cd","\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"insert undo log"}),"\uff0c\u4ee3\u8868\u4e8b\u52a1\u5728 ",(0,d.jsx)(n.code,{children:"INSERT"})," \u65b0\u8bb0\u5f55\u65f6\u4ea7\u751f\u7684 ",(0,d.jsx)(n.code,{children:"undo log"}),"\uff0c\u53ea\u5728\u4e8b\u52a1\u56de\u6eda\u65f6\u9700\u8981\uff0c\u5e76\u4e14\u5728\u4e8b\u52a1\u63d0\u4ea4\u540e\u53ef\u4ee5\u88ab\u7acb\u5373\u4e22\u5f03"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"update undo log"}),"\uff08\u4e3b\u8981\uff09\uff0c\u4e8b\u52a1\u5728\u8fdb\u884c ",(0,d.jsx)(n.code,{children:"UPDATE"})," \u6216 ",(0,d.jsx)(n.code,{children:"DELETE"})," \u65f6\u4ea7\u751f\u7684 ",(0,d.jsx)(n.code,{children:"undo log"}),"\uff0c\u4e0d\u4ec5\u5728\u4e8b\u52a1\u56de\u6eda\u65f6\u9700\u8981\uff0c\u5728\u5feb\u7167\u8bfb\u65f6\u4e5f\u9700\u8981\uff0c\u6240\u4ee5\u4e0d\u80fd\u968f\u4fbf\u5220\u9664\uff0c\u53ea\u6709\u5728\u5feb\u901f\u8bfb\u6216\u4e8b\u52a1\u56de\u6eda\u4e0d\u6d89\u53ca\u8be5\u65e5\u5fd7\u65f6\uff0c\u5bf9\u5e94\u7684\u65e5\u5fd7\u624d\u4f1a\u88ab ",(0,d.jsx)(n.code,{children:"purge"})," \u7ebf\u7a0b\u7edf\u4e00\u6e05\u9664"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(n.h3,{id:"redo-log-vs-binlog",children:[(0,d.jsx)(n.code,{children:"redo log"})," vs. ",(0,d.jsx)(n.code,{children:"binlog"})]}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["\u4f5c\u7528\u4e0d\u540c\uff1a",(0,d.jsx)(n.code,{children:"redo log"})," \u662f\u7528\u4e8e ",(0,d.jsx)(n.code,{children:"crash recovery"})," \u7684\uff0c\u4fdd\u8bc1 ",(0,d.jsx)(n.code,{children:"MySQL"})," \u5b95\u673a\u4e5f\u4e0d\u4f1a\u5f71\u54cd\u6301\u4e45\u6027\uff1b",(0,d.jsx)(n.code,{children:"binlog"})," \u662f\u7528\u4e8e ",(0,d.jsx)(n.code,{children:"point-in-time recovery"})," \u7684\uff0c\u4fdd\u8bc1\u670d\u52a1\u5668\u53ef\u4ee5\u57fa\u4e8e\u65f6\u95f4\u70b9\u6062\u590d\u6570\u636e\uff0c\u6b64\u5916 ",(0,d.jsx)(n.code,{children:"binlog"}),"\u8fd8\u7528\u4e8e\u4e3b\u4ece\u590d\u5236\u3002"]}),"\n",(0,d.jsxs)(n.li,{children:["\u5c42\u6b21\u4e0d\u540c\uff1a",(0,d.jsx)(n.code,{children:"redo log"})," \u662f ",(0,d.jsx)(n.code,{children:"InnoDB"})," \u5b58\u50a8\u5f15\u64ce\u5b9e\u73b0\u7684\uff0c\u800c ",(0,d.jsx)(n.code,{children:"binlog"})," \u662f ",(0,d.jsx)(n.code,{children:"MySQL"})," \u7684\u670d\u52a1\u5668\u5c42\u5b9e\u73b0\u7684\uff0c\u540c\u65f6\u652f\u6301 ",(0,d.jsx)(n.code,{children:"InnoDB"})," \u548c\u5176\u4ed6\u5b58\u50a8\u5f15\u64ce\u3002"]}),"\n",(0,d.jsxs)(n.li,{children:["\u5185\u5bb9\u4e0d\u540c\uff1a",(0,d.jsx)(n.code,{children:"redo log"})," \u662f\u7269\u7406\u65e5\u5fd7\uff0c\u5185\u5bb9\u57fa\u4e8e\u78c1\u76d8\u7684 ",(0,d.jsx)(n.code,{children:"Page"}),"\uff1b",(0,d.jsx)(n.code,{children:"binlog"})," \u7684\u5185\u5bb9\u662f\u4e8c\u8fdb\u5236\u7684\uff0c\u6839\u636e ",(0,d.jsx)(n.code,{children:"binlog_format"})," \u53c2\u6570\u7684\u4e0d\u540c\uff0c\u53ef\u80fd\u57fa\u4e8e ",(0,d.jsx)(n.code,{children:"SQL"})," \u8bed\u53e5\u3001\u57fa\u4e8e\u6570\u636e\u672c\u8eab\u6216\u8005\u4e8c\u8005\u7684\u6df7\u5408\u3002"]}),"\n",(0,d.jsxs)(n.li,{children:["\u5199\u5165\u65f6\u673a\u4e0d\u540c\uff1a",(0,d.jsx)(n.code,{children:"binlog"})," \u5728\u4e8b\u52a1\u63d0\u4ea4\u65f6\u5199\u5165\uff1b",(0,d.jsx)(n.code,{children:"redo log"})," \u7684\u5199\u5165\u65f6\u673a\u76f8\u5bf9\u591a\u5143\uff1a","\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["\u5f53\u4e8b\u52a1\u63d0\u4ea4\u65f6\u4f1a\u8c03\u7528 ",(0,d.jsx)(n.code,{children:"fsync"})," \u5bf9 ",(0,d.jsx)(n.code,{children:"redo log"})," \u8fdb\u884c\u5237\u76d8\uff0c\u8fd9\u662f\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u7684\u7b56\u7565\uff0c\u4fee\u6539 ",(0,d.jsx)(n.code,{children:"innodb_flush_log_at_trx_COMMIT"})," \u53c2\u6570\u53ef\u4ee5\u6539\u53d8\u8be5\u7b56\u7565\uff0c\u4f46\u4e8b\u52a1\u7684\u6301\u4e45\u6027\u5c06\u65e0\u6cd5\u4fdd\u8bc1\u3002"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"Master Thread"})," \u6bcf\u79d2\u5237\u76d8\u4e00\u6b21 ",(0,d.jsx)(n.code,{children:"redo log"}),"\uff0c\u8fd9\u6837\u7684\u597d\u5904\u662f\u4e0d\u4e00\u5b9a\u8981\u7b49\u5230 ",(0,d.jsx)(n.code,{children:"COMMIT"})," \u65f6\u5237\u76d8\uff0c",(0,d.jsx)(n.code,{children:"COMMIT"})," \u901f\u5ea6\u5927\u5927\u52a0\u5feb\u3002"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(n.h2,{id:"acid",children:(0,d.jsx)(n.code,{children:"ACID"})}),"\n",(0,d.jsxs)(n.blockquote,{children:["\n",(0,d.jsxs)(n.p,{children:["\u4e8b\u52a1\uff08",(0,d.jsx)(n.code,{children:"Transaction"}),"\uff09\u662f\u8bbf\u95ee\u548c\u66f4\u65b0\u6570\u636e\u5e93\u7684\u7a0b\u5e8f\u6267\u884c\u5355\u5143\uff0c\u4e8b\u52a1\u4e2d\u53ef\u80fd\u5305\u542b\u4e00\u4e2a\u6216\u591a\u4e2a ",(0,d.jsx)(n.code,{children:"SQL"})," \u8bed\u53e5\uff0c\u8fd9\u4e9b\u8bed\u53e5\u8981\u4e48\u90fd\u6267\u884c\uff0c\u8981\u4e48\u90fd\u4e0d\u6267\u884c\u3002",(0,d.jsx)(n.code,{children:"MySQL"})," \u652f\u6301\u4e8b\u52a1\u7684\u5b58\u50a8\u5f15\u64ce\u6709 ",(0,d.jsx)(n.code,{children:"InnoDB"}),"\u3001",(0,d.jsx)(n.code,{children:"NDB Cluster"})," \u7b49\uff0c\u5176\u4e2d ",(0,d.jsx)(n.code,{children:"InnoDB"})," \u7684\u4f7f\u7528\u6700\u4e3a\u5e7f\u6cdb\uff0c\u5176\u4ed6\u5b58\u50a8\u5f15\u64ce\u4e0d\u652f\u6301\u4e8b\u52a1\uff0c\u5982 ",(0,d.jsx)(n.code,{children:"MyIsam"}),"\u3001",(0,d.jsx)(n.code,{children:"Memory"})," \u7b49\u3002"]}),"\n"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-text",children:"MySQL \u670d\u52a1\u5668\u903b\u8f91\u67b6\u6784\u4ece\u4e0a\u5f80\u4e0b\u53ef\u4ee5\u5206\u4e3a\u4e09\u5c42\uff1a\n\u7b2c\u4e00\u5c42\uff1a\u5904\u7406\u5ba2\u6237\u7aef\u8fde\u63a5\u3001\u6388\u6743\u8ba4\u8bc1\u7b49\u3002\n\u7b2c\u4e8c\u5c42\uff1a\u670d\u52a1\u5668\u5c42\uff0c\u8d1f\u8d23\u67e5\u8be2\u8bed\u53e5\u7684\u89e3\u6790\u3001\u4f18\u5316\u3001\u7f13\u5b58\u4ee5\u53ca\u5185\u7f6e\u51fd\u6570\u7684\u5b9e\u73b0\u3001\u5b58\u50a8\u8fc7\u7a0b\u7b49\u3002\n\u7b2c\u4e09\u5c42\uff1a\u5b58\u50a8\u5f15\u64ce\uff0c\u8d1f\u8d23 MySQL \u4e2d\u6570\u636e\u7684\u5b58\u50a8\u548c\u63d0\u53d6\u3002MySQL \u4e2d\u670d\u52a1\u5668\u5c42\u4e0d\u7ba1\u7406\u4e8b\u52a1\uff0c\u4e8b\u52a1\u662f\u7531\u5b58\u50a8\u5f15\u64ce\u5b9e\u73b0\u7684\u3002\n"})}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["\u6309\u7167\u4e25\u683c\u7684\u6807\u51c6\uff0c\u53ea\u6709\u540c\u65f6\u6ee1\u8db3 ",(0,d.jsx)(n.code,{children:"ACID"})," \u7279\u6027\u624d\u662f\u4e8b\u52a1\u3002\u4f46\u662f\u5728\u5404\u5927\u6570\u636e\u5e93\u5382\u5546\u7684\u5b9e\u73b0\u4e2d\uff0c\u771f\u6b63\u6ee1\u8db3 ",(0,d.jsx)(n.code,{children:"ACID"})," \u7684\u4e8b\u52a1\u5c11\u4e4b\u53c8\u5c11\u3002\u4f8b\u5982 ",(0,d.jsx)(n.code,{children:"MySQL"})," \u7684 ",(0,d.jsx)(n.code,{children:"NDB Cluster"})," \u4e8b\u52a1\u4e0d\u6ee1\u8db3\u6301\u4e45\u6027\u548c\u9694\u79bb\u6027\uff0c",(0,d.jsx)(n.code,{children:"InnoDB"})," \u9ed8\u8ba4\u4e8b\u52a1\u9694\u79bb\u7ea7\u522b\u662f\u53ef\u91cd\u590d\u8bfb\uff0c\u4e0d\u6ee1\u8db3\u9694\u79bb\u6027\uff0c",(0,d.jsx)(n.code,{children:"Oracle"})," \u9ed8\u8ba4\u7684\u4e8b\u52a1\u9694\u79bb\u7ea7\u522b\u4e3a ",(0,d.jsx)(n.code,{children:"READ COMMITTED"}),"\uff0c\u4e0d\u6ee1\u8db3\u9694\u79bb\u6027\u3002\u56e0\u6b64\u4e0e\u5176\u8bf4 ",(0,d.jsx)(n.code,{children:"ACID"})," \u662f\u4e8b\u52a1\u5fc5\u987b\u6ee1\u8db3\u7684\u6761\u4ef6\uff0c\u4e0d\u5982\u8bf4\u5b83\u4eec\u662f\u8861\u91cf\u4e8b\u52a1\u7684\u56db\u4e2a\u7ef4\u5ea6\u3002"]}),"\n"]}),"\n",(0,d.jsx)(n.h3,{id:"atomicity",children:(0,d.jsx)(n.code,{children:"Atomicity"})}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["\u539f\u5b50\u6027\u662f\u6307\u4e00\u4e2a\u4e8b\u52a1\u662f\u4e00\u4e2a\u4e0d\u53ef\u5206\u5272\u7684\u5de5\u4f5c\u5355\u4f4d\uff0c\u5176\u4e2d\u7684\u64cd\u4f5c\u8981\u4e48\u90fd\u505a\uff0c\u8981\u4e48\u90fd\u4e0d\u505a\uff1b\u5982\u679c\u4e8b\u52a1\u4e2d\u4e00\u4e2a ",(0,d.jsx)(n.code,{children:"sql"})," \u8bed\u53e5\u6267\u884c\u5931\u8d25\uff0c\u5219\u5df2\u6267\u884c\u7684\u8bed\u53e5\u4e5f\u5fc5\u987b\u56de\u6eda\uff0c\u6570\u636e\u5e93\u9000\u56de\u5230\u4e8b\u52a1\u524d\u7684\u72b6\u6001\u3002","\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["\u901a\u8fc7 ",(0,d.jsx)(n.code,{children:"undo log"})," \u5b9e\u73b0\u539f\u5b50\u6027\u3002"]}),"\n",(0,d.jsxs)(n.li,{children:["\u5bf9\u4e8e\u6bcf\u4e2a ",(0,d.jsx)(n.code,{children:"INSERT"}),"\uff0c\u56de\u6eda\u65f6\u4f1a\u6267\u884c ",(0,d.jsx)(n.code,{children:"DELETE"})]}),"\n",(0,d.jsxs)(n.li,{children:["\u5bf9\u4e8e\u6bcf\u4e2a ",(0,d.jsx)(n.code,{children:"DELETE"}),"\uff0c\u56de\u6eda\u65f6\u4f1a\u6267\u884c ",(0,d.jsx)(n.code,{children:"INSERT"})]}),"\n",(0,d.jsxs)(n.li,{children:["\u5bf9\u4e8e\u6bcf\u4e2a ",(0,d.jsx)(n.code,{children:"UPDATE"}),"\uff0c\u56de\u6eda\u65f6\u4f1a\u6267\u884c\u4e00\u4e2a\u76f8\u53cd\u7684 ",(0,d.jsx)(n.code,{children:"UPDATE"}),"\uff0c\u628a\u6570\u636e\u6539\u56de\u53bb"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(n.h3,{id:"consistency",children:(0,d.jsx)(n.code,{children:"Consistency"})}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["\u4e00\u81f4\u6027\u662f\u6307\u4e8b\u52a1\u628a\u6570\u636e\u5e93\u4ece\u4e00\u4e2a\u6709\u6548\u7684\u72b6\u6001\u8f6c\u79fb\u6210\u53e6\u4e00\u4e2a\u6709\u6548\u72b6\u6001\uff0c\u4e8b\u52a1\u6267\u884c\u7ed3\u675f\u540e\uff0c\u6570\u636e\u5e93\u7684\u5b8c\u6574\u6027\u6ca1\u6709\u88ab\u7834\u574f\uff0c\u4e8b\u52a1\u6267\u884c\u7684\u524d\u540e\u90fd\u662f\u5408\u6cd5\u7684\u6570\u636e\u72b6\u6001\u3002\u4e00\u81f4\u6027\u662f\u4e8b\u7269\u8ffd\u6c42\u7684\u6700\u7ec8\u76ee\u6807\uff0c\u539f\u5b50\u6027\uff0c\u9694\u79bb\u6027\uff0c\u6301\u4e45\u6027\u90fd\u662f\u4e3a\u4e86\u4fdd\u8bc1\u6570\u636e\u5e93\u7684\u4e00\u81f4\u6027\u3002\u6b64\u5916\uff0c\u9664\u4e86\u6570\u636e\u5e93\u5e95\u5c42\u7684\u4fdd\u969c\uff0c\u4e00\u81f4\u6027\u7684\u5b9e\u73b0\u4e5f\u9700\u8981\u5e94\u7528\u5c42\u7684\u4fdd\u969c\u3002","\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"\u4fdd\u8bc1\u539f\u5b50\u6027\u3001\u6301\u4e45\u6027\u548c\u9694\u79bb\u6027\uff0c\u5982\u679c\u8fd9\u4e9b\u7279\u6027\u65e0\u6cd5\u4fdd\u8bc1\uff0c\u4e8b\u52a1\u7684\u4e00\u81f4\u6027\u4e5f\u65e0\u6cd5\u4fdd\u8bc1"}),"\n",(0,d.jsx)(n.li,{children:"\u6570\u636e\u5e93\u672c\u8eab\u63d0\u4f9b\u4fdd\u969c\uff0c\u4f8b\u5982\u4e0d\u5141\u8bb8\u5411\u6574\u5f62\u5217\u63d2\u5165\u5b57\u7b26\u4e32\u503c\u3001\u5b57\u7b26\u4e32\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7\u5217\u7684\u9650\u5236\u7b49"}),"\n",(0,d.jsx)(n.li,{children:"\u5e94\u7528\u5c42\u9762\u8fdb\u884c\u4fdd\u969c\uff0c\u4f8b\u5982\u5982\u679c\u8f6c\u8d26\u64cd\u4f5c\u53ea\u6263\u9664\u8f6c\u8d26\u8005\u7684\u4f59\u989d\uff0c\u800c\u6ca1\u6709\u589e\u52a0\u63a5\u6536\u8005\u7684\u4f59\u989d\uff0c\u65e0\u8bba\u6570\u636e\u5e93\u5b9e\u73b0\u7684\u591a\u4e48\u5b8c\u7f8e\uff0c\u4e5f\u65e0\u6cd5\u4fdd\u8bc1\u72b6\u6001\u7684\u4e00\u81f4"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(n.h3,{id:"isolation",children:(0,d.jsx)(n.code,{children:"Isolation"})}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["\u9694\u79bb\u6027\u662f\u6307\uff0c\u4e8b\u52a1\u5185\u90e8\u7684\u64cd\u4f5c\u4e0e\u5176\u4ed6\u4e8b\u52a1\u662f\u9694\u79bb\u7684\uff0c\u5e76\u53d1\u6267\u884c\u7684\u5404\u4e2a\u4e8b\u52a1\u4e4b\u95f4\u4e0d\u80fd\u4e92\u76f8\u5e72\u6270\u3002\u4e25\u683c\u7684\u9694\u79bb\u6027\uff0c\u5bf9\u5e94\u4e86\u4e8b\u52a1\u9694\u79bb\u7ea7\u522b\u4e2d\u7684 ",(0,d.jsx)(n.code,{children:"Serializable"})," \uff08\u53ef\u4e32\u884c\u5316\uff09\uff0c\u4f46\u5b9e\u9645\u5e94\u7528\u4e2d\u51fa\u4e8e\u6027\u80fd\u65b9\u9762\u7684\u8003\u8651\u5f88\u5c11\u4f1a\u4f7f\u7528\u53ef\u4e32\u884c\u5316\u3002","\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"\uff08\u4e00\u4e2a\u4e8b\u52a1\uff09\u5199\u64cd\u4f5c\u5bf9\uff08\u53e6\u4e00\u4e2a\u4e8b\u52a1\uff09\u5199\u64cd\u4f5c\u7684\u5f71\u54cd\uff1a\u9501\u673a\u5236\u4fdd\u8bc1\u9694\u79bb\u6027"}),"\n",(0,d.jsxs)(n.li,{children:["\uff08\u4e00\u4e2a\u4e8b\u52a1\uff09\u5199\u64cd\u4f5c\u5bf9\uff08\u53e6\u4e00\u4e2a\u4e8b\u52a1\uff09\u8bfb\u64cd\u4f5c\u7684\u5f71\u54cd\uff1a",(0,d.jsx)(n.code,{children:"MVCC"})," \u4fdd\u8bc1\u9694\u79bb\u6027"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(n.h3,{id:"durability",children:(0,d.jsx)(n.code,{children:"Durability"})}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["\u6301\u4e45\u6027\u662f\u6307\u4e8b\u52a1\u4e00\u65e6\u63d0\u4ea4\uff0c\u5b83\u5bf9\u6570\u636e\u5e93\u7684\u6539\u53d8\u5c31\u5e94\u8be5\u662f\u6c38\u4e45\u6027\u7684\u3002\u63a5\u4e0b\u6765\u7684\u5176\u4ed6\u64cd\u4f5c\u6216\u6545\u969c\u4e0d\u5e94\u8be5\u5bf9\u5176\u6709\u4efb\u4f55\u5f71\u54cd\u3002","\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["\u901a\u8fc7 ",(0,d.jsx)(n.code,{children:"redo log"})," \u5b9e\u73b0\u6301\u4e45\u6027\u3002"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-text",children:"    InnoDB \u4f5c\u4e3a MySQL \u7684\u5b58\u50a8\u5f15\u64ce\uff0c\u6570\u636e\u662f\u5b58\u653e\u5728\u78c1\u76d8\u4e2d\u7684\uff0c\u4f46\u5982\u679c\u6bcf\u6b21\u8bfb\u5199\u6570\u636e\u90fd\u9700\u8981\u78c1\u76d8 IO\uff0c\u6548\u7387\u4f1a\u5f88\u4f4e\u3002\n\u4e3a\u6b64\uff0cInnoDB \u63d0\u4f9b\u4e86\u7f13\u5b58(Buffer Pool)\uff0cBuffer Pool \u4e2d\u5305\u542b\u4e86\u78c1\u76d8\u4e2d\u90e8\u5206\u6570\u636e\u9875\u7684\u6620\u5c04\uff0c\u4f5c\u4e3a\u8bbf\u95ee\u6570\u636e\u5e93\u7684\u7f13\u51b2\u3002\n\u5f53\u4ece\u6570\u636e\u5e93\u8bfb\u53d6\u6570\u636e\u65f6\uff0c\u4f1a\u9996\u5148\u4ece Buffer Pool \u4e2d\u8bfb\u53d6\uff0c\u5982\u679c Buffer Pool \u4e2d\u6ca1\u6709\uff0c\u5219\u4ece\u78c1\u76d8\u8bfb\u53d6\u540e\u653e\u5165 Buffer Pool\u3002\n\u5f53\u5411\u6570\u636e\u5e93\u5199\u5165\u6570\u636e\u65f6\uff0c\u4f1a\u9996\u5148\u5199\u5165 Buffer Pool\uff0cBuffer Pool \u4e2d\u4fee\u6539\u7684\u6570\u636e\u4f1a\u5b9a\u671f\u5237\u65b0\u5230\u78c1\u76d8\u4e2d\uff08\u8fd9\u4e00\u8fc7\u7a0b\u79f0\u4e3a\u5237\u810f\uff09\u3002\nBuffer Pool \u7684\u4f7f\u7528\u5927\u5927\u63d0\u9ad8\u4e86\u8bfb\u5199\u6570\u636e\u7684\u6548\u7387\uff0c\u4f46\u662f\u4e5f\u5e26\u4e86\u65b0\u7684\u95ee\u9898\u3002\n\u5982\u679c MySQL \u5b95\u673a\uff0c\u800c\u6b64\u65f6 Buffer Pool \u4e2d\u4fee\u6539\u7684\u6570\u636e\u8fd8\u6ca1\u6709\u5237\u65b0\u5230\u78c1\u76d8\uff0c\u5c31\u4f1a\u5bfc\u81f4\u6570\u636e\u7684\u4e22\u5931\uff0c\u4e8b\u52a1\u7684\u6301\u4e45\u6027\u65e0\u6cd5\u4fdd\u8bc1\u3002\n    \u4e8e\u662f\uff0credo log \u88ab\u5f15\u5165\u6765\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u3002\n\u5f53\u6570\u636e\u4fee\u6539\u65f6\uff0c\u9664\u4e86\u4fee\u6539 Buffer Pool \u4e2d\u7684\u6570\u636e\uff0c\u8fd8\u4f1a\u5728 redo log \u8bb0\u5f55\u8fd9\u6b21\u64cd\u4f5c\u3002\n\u5f53\u4e8b\u52a1\u63d0\u4ea4\u65f6\uff0c\u4f1a\u8c03\u7528 fsync \u63a5\u53e3\u5bf9 redo log \u8fdb\u884c\u5237\u76d8\u3002\n\u5982\u679c MySQL \u5b95\u673a\uff0c\u91cd\u542f\u65f6\u53ef\u4ee5\u8bfb\u53d6 redo log \u4e2d\u7684\u6570\u636e\uff0c\u5bf9\u6570\u636e\u5e93\u8fdb\u884c\u6062\u590d\u3002\nredo log \u91c7\u7528\u7684\u662f WAL\uff08Write-ahead logging\uff0c\u9884\u5199\u5f0f\u65e5\u5fd7\uff09\uff0c\u6240\u6709\u4fee\u6539\u5148\u5199\u5165\u65e5\u5fd7\uff0c\u518d\u66f4\u65b0\u5230 Buffer Pool\uff0c\n\u4fdd\u8bc1\u4e86\u6570\u636e\u4e0d\u4f1a\u56e0 MySQL \u5b95\u673a\u800c\u4e22\u5931\uff0c\u4ece\u800c\u6ee1\u8db3\u4e86\u6301\u4e45\u6027\u8981\u6c42\u3002\n    \u65e2\u7136 redo log \u4e5f\u9700\u8981\u5728\u4e8b\u52a1\u63d0\u4ea4\u65f6\u5c06\u65e5\u5fd7\u5199\u5165\u78c1\u76d8\uff0c\u4e3a\u4ec0\u4e48\u5b83\u6bd4\u76f4\u63a5\u5c06 Buffer Pool \u4e2d\u4fee\u6539\u7684\u6570\u636e\u5199\u5165\u78c1\u76d8(\u5373\u5237\u810f)\u8981\u5feb\u5462\uff1f\n    \u4e3b\u8981\u6709\u4ee5\u4e0b\u4e24\u65b9\u9762\u7684\u539f\u56e0\uff1a\n    \uff081\uff09\u5237\u810f\u662f\u968f\u673a IO\uff0c\u56e0\u4e3a\u6bcf\u6b21\u4fee\u6539\u7684\u6570\u636e\u4f4d\u7f6e\u968f\u673a\uff0c\u4f46\u5199 redo log \u662f\u8ffd\u52a0\u64cd\u4f5c\uff0c\u5c5e\u4e8e\u987a\u5e8f IO\u3002\n    \uff082\uff09\u5237\u810f\u662f\u4ee5\u6570\u636e\u9875\uff08Page\uff09\u4e3a\u5355\u4f4d\u7684\uff0cMySQL \u9ed8\u8ba4\u9875\u5927\u5c0f\u662f 16KB\uff0c\u4e00\u4e2a Page \u4e0a\u4e00\u4e2a\u5c0f\u4fee\u6539\u90fd\u8981\u6574\u9875\u5199\u5165\uff1b\n\u800c redo log \u4e2d\u53ea\u5305\u542b\u771f\u6b63\u9700\u8981\u5199\u5165\u7684\u90e8\u5206\uff0c\u65e0\u6548 IO \u5927\u5927\u51cf\u5c11\u3002\n"})}),"\n",(0,d.jsx)(n.h2,{id:"mvcc",children:(0,d.jsx)(n.code,{children:"MVCC"})}),"\n",(0,d.jsxs)(n.blockquote,{children:["\n",(0,d.jsxs)(n.p,{children:["\u5168\u79f0 ",(0,d.jsx)(n.code,{children:"Multi-Version Concurrency Control"}),"\uff0c\u5373\u591a\u7248\u672c\u5e76\u53d1\u63a7\u5236\uff0c\u4e3b\u8981\u662f\u4e3a\u4e86\u63d0\u9ad8\u6570\u636e\u5e93\u7684\u5e76\u53d1\u6027\u80fd\u3002",(0,d.jsx)(n.code,{children:"MVCC"})," \u4e3a\u4e8b\u52a1\u5206\u914d\u5355\u5411\u589e\u957f\u7684\u65f6\u95f4\u6233\uff0c\u7ef4\u6301\u4e00\u4e2a\u6570\u636e\u7684\u591a\u4e2a\u7248\u672c\uff0c\u4f7f\u8bfb\u5199\u64cd\u4f5c\u6ca1\u6709\u51b2\u7a81\u7684\u4e00\u4e2a\u62bd\u8c61\u6982\u5ff5\u3002\u53ef\u89e3\u51b3\u810f\u8bfb\u3001\u5e7b\u8bfb\u3001\u4e0d\u53ef\u91cd\u590d\u8bfb\u7b49\u4e8b\u52a1\u9694\u79bb\u95ee\u9898\u3002"]}),"\n"]}),"\n",(0,d.jsx)(n.h3,{id:"\u5f53\u524d\u8bfb",children:"\u5f53\u524d\u8bfb"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["\u8bfb\u53d6\u7684\u6570\u636e\u5e93\u8bb0\u5f55\u90fd\u662f\u5f53\u524d\u6700\u65b0\u7684\u7248\u672c\uff0c\u4f1a\u5bf9\u5f53\u524d\u8bfb\u53d6\u7684\u6570\u636e\u8fdb\u884c\u52a0\u9501\uff0c\u9632\u6b62\u5176\u4ed6\u4e8b\u52a1\u4fee\u6539\u6570\u636e\uff0c\u662f\u60b2\u89c2\u9501\u7684\u4e00\u79cd\u64cd\u4f5c\u3002","\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"SELECT LOCK IN SHARE MODE"})," (\u5171\u4eab\u9501)"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"SELECT FOR UPDATE"})," (\u6392\u4ed6\u9501)"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"INSERT / UPDATE / DELETE"})," (\u6392\u4ed6\u9501)"]}),"\n",(0,d.jsx)(n.li,{children:"\u4e32\u884c\u5316\u4e8b\u52a1\u9694\u79bb\u7ea7\u522b"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(n.h3,{id:"\u5feb\u7167\u8bfb",children:"\u5feb\u7167\u8bfb"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["\u57fa\u4e8e\u591a\u7248\u672c\u5e76\u53d1\u63a7\u5236\uff08",(0,d.jsx)(n.code,{children:"MVCC"}),"\uff09\uff0c\u8bfb\u5230\u7684\u6570\u636e\u4e0d\u4e00\u5b9a\u662f\u5f53\u524d\u6700\u65b0\u7684\u6570\u636e\uff0c\u6709\u53ef\u80fd\u662f\u4e4b\u524d\u5386\u53f2\u7248\u672c\u7684\u6570\u636e\u3002","\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["\u4e0d\u52a0\u9501\u7684 ",(0,d.jsx)(n.code,{children:"SELECT"})," \u64cd\u4f5c\uff08\u6ce8\uff1a\u4e8b\u52a1\u7ea7\u522b\u4e0d\u662f\u4e32\u884c\u5316\uff09"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(n.h3,{id:"\u5b9e\u73b0\u539f\u7406",children:"\u5b9e\u73b0\u539f\u7406"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["\u4e3b\u8981\u901a\u8fc7",(0,d.jsx)(n.code,{children:"\u7248\u672c\u94fe"}),"\uff0c",(0,d.jsx)(n.code,{children:"undo log"})," \uff0c",(0,d.jsx)(n.code,{children:"Read Viev"})," \u6765\u5b9e\u73b0"]}),"\n"]}),"\n",(0,d.jsx)(n.h4,{id:"\u7248\u672c\u94fe",children:"\u7248\u672c\u94fe"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"InnoDB"})," \u7684\u6bcf\u884c\u6570\u636e\u6709\u4e00\u4e2a\u9690\u85cf\u7684 ",(0,d.jsx)(n.code,{children:"db_roll_pointer"})," \u5b57\u6bb5\uff0c\u662f\u4e00\u4e2a\u56de\u6eda\u6307\u9488\uff0c\u7528\u4e8e\u914d\u5408 ",(0,d.jsx)(n.code,{children:"undo log"}),"\uff0c\u6307\u5411\u4e0a\u4e00\u4e2a\u65e7\u7248\u672c\u3002\u6bcf\u6b21\u5bf9\u6570\u636e\u5e93\u8bb0\u5f55\u8fdb\u884c\u6539\u52a8\uff0c\u90fd\u4f1a\u8bb0\u5f55\u4e00\u6761 ",(0,d.jsx)(n.code,{children:"undo log"}),"\uff0c\u6bcf\u6761 ",(0,d.jsx)(n.code,{children:"undo log"})," \u4e5f\u90fd\u6709\u4e00\u4e2a ",(0,d.jsx)(n.code,{children:"roll_pointer"})," \u5c5e\u6027\uff08",(0,d.jsx)(n.code,{children:"INSERT"})," \u64cd\u4f5c\u5bf9\u5e94\u7684 ",(0,d.jsx)(n.code,{children:"undo log"})," \u6ca1\u6709\u8be5\u5c5e\u6027\uff0c\u56e0\u4e3a\u8be5\u8bb0\u5f55\u5e76\u6ca1\u6709\u66f4\u65e9\u7684\u7248\u672c\uff09\uff0c\u53ef\u4ee5\u5c06\u8fd9\u4e9b ",(0,d.jsx)(n.code,{children:"undo log"})," \u90fd\u8fde\u8d77\u6765\uff0c\u4e32\u6210\u4e00\u4e2a\u94fe\u8868\uff0c\u79f0\u4e4b\u4e3a\u7248\u672c\u94fe\u3002"]}),"\n"]}),"\n",(0,d.jsxs)(n.h4,{id:"read-viev\u8bfb\u89c6\u56fe",children:[(0,d.jsx)(n.code,{children:"Read Viev"}),"\uff08\u8bfb\u89c6\u56fe\uff09"]}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["\u4e3b\u8981\u662f\u7528\u6765\u505a\u53ef\u89c1\u6027\u5224\u65ad\u7684, \u5373\u5f53\u67d0\u4e2a\u4e8b\u52a1\u6267\u884c\u5feb\u7167\u8bfb\u7684\u65f6\u5019\uff0c\u5bf9\u8be5\u8bb0\u5f55\u521b\u5efa\u4e00\u4e2a ",(0,d.jsx)(n.code,{children:"Read Viev"})," \u8bfb\u89c6\u56fe\uff0c\u7528\u6765\u5224\u65ad\u5f53\u524d\u4e8b\u52a1\u80fd\u591f\u770b\u5230\u54ea\u4e2a\u7248\u672c\u7684\u6570\u636e\uff0c\u65e2\u53ef\u80fd\u662f\u5f53\u524d\u6700\u65b0\u7684\u6570\u636e\uff0c\u4e5f\u6709\u53ef\u80fd\u662f\u8be5\u884c\u8bb0\u5f55\u7684 ",(0,d.jsx)(n.code,{children:"undo log"})," \u91cc\u9762\u7684\u67d0\u4e2a\u7248\u672c\u7684\u6570\u636e\u3002"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"Read Viev"})," \u5c5e\u6027","\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"trx_ids"}),": \u5f53\u524d\u7cfb\u7edf\u6d3b\u8dc3\uff08\u672a\u63d0\u4ea4\uff09\u4e8b\u52a1\u7248\u672c\u53f7\u96c6\u5408"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"low_limit_id"}),": \u521b\u5efa\u5f53\u524d ",(0,d.jsx)(n.code,{children:"Read Viev"})," \u65f6\u5f53\u524d\u7cfb\u7edf\u6700\u5927\u4e8b\u52a1\u7248\u672c\u53f7 + 1"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"up_limit_id"}),": \u521b\u5efa\u5f53\u524d ",(0,d.jsx)(n.code,{children:"Read Viev"})," \u65f6\u7cfb\u7edf\u6b63\u5904\u4e8e\u6d3b\u8dc3\u4e8b\u52a1\u6700\u5c0f\u7248\u672c\u53f7"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"creator_trx_id"}),": \u521b\u5efa\u5f53\u524d ",(0,d.jsx)(n.code,{children:"Read Viev"})," \u7684\u4e8b\u52a1\u7248\u672c\u53f7"]}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"Read Viev"})," \u53ef\u89c1\u6027\u5224\u65ad\u6761\u4ef6","\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"db_trx_id < up_limit_id || db_trx_id == creator_trx_id"}),"\uff08\u663e\u793a\uff09","\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["\u5982\u679c\u4e8b\u52a1 ",(0,d.jsx)(n.code,{children:"ID"})," \u5c0f\u4e8e ",(0,d.jsx)(n.code,{children:"Read Viev"})," \u4e2d\u7684\u6700\u5c0f\u6d3b\u8dc3\u4e8b\u52a1 ",(0,d.jsx)(n.code,{children:"ID"}),"\uff0c\u5219\u53ef\u4ee5\u80af\u5b9a\u8be5\u6570\u636e\u662f\u5728\u5f53\u524d\u4e8b\u52a1\u542f\u4e4b\u524d\u5c31\u5df2\u7ecf\u5b58\u5728\u4e86\u7684\uff0c\u53ef\u4ee5\u663e\u793a"]}),"\n",(0,d.jsxs)(n.li,{children:["\u5982\u679c\u4e8b\u52a1 ",(0,d.jsx)(n.code,{children:"ID"})," \u7b49\u4e8e ",(0,d.jsx)(n.code,{children:"creator_trx_id"}),"\uff0c\u90a3\u4e48\u8bf4\u660e\u6570\u636e\u5c31\u662f\u5f53\u524d\u4e8b\u52a1\u751f\u6210\u7684\uff0c\u53ef\u4ee5\u663e\u793a"]}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"db_trx_id >= low_limit_id"}),"\uff08\u4e0d\u663e\u793a\uff09","\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["\u5982\u679c\u4e8b\u52a1 ",(0,d.jsx)(n.code,{children:"ID"})," \u5927\u4e8e ",(0,d.jsx)(n.code,{children:"Read Viev"})," \u4e2d\u7684\u5f53\u524d\u7cfb\u7edf\u7684\u6700\u5927\u4e8b\u52a1 ",(0,d.jsx)(n.code,{children:"ID"}),"\uff0c\u5219\u6570\u636e\u662f\u5728\u5f53\u524d ",(0,d.jsx)(n.code,{children:"Read Viev"})," \u521b\u5efa\u4e4b\u540e\u4ea7\u751f\u7684\uff0c\u4e0d\u663e\u793a"]}),"\n",(0,d.jsx)(n.li,{children:"\u5982\u679c\u5c0f\u4e8e\u5219\u8fdb\u5165\u4e0b\u4e00\u4e2a\u5224\u65ad"}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"db_trx_id"})," \u662f\u5426\u5728\u6d3b\u8dc3\u4e8b\u52a1 ",(0,d.jsx)(n.code,{children:"trx_ids"})," \u4e2d","\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["\u4e0d\u5b58\u5728\uff0c\u5219\u8bf4\u660e ",(0,d.jsx)(n.code,{children:"Read Viev"})," \u4ea7\u751f\u7684\u65f6\u5019\u4e8b\u52a1\u5df2\u7ecf ",(0,d.jsx)(n.code,{children:"COMMIT"})," \u4e86\uff0c\u53ef\u4ee5\u663e\u793a"]}),"\n",(0,d.jsxs)(n.li,{children:["\u5df2\u5b58\u5728\uff0c\u5219\u4ee3\u8868 ",(0,d.jsx)(n.code,{children:"Read Viev"})," \u4ea7\u751f\u7684\u65f6\u5019\u4e8b\u52a1\u8fd8\u5728\u6d3b\u8dc3\uff08\u6ca1\u6709 ",(0,d.jsx)(n.code,{children:"COMMIT"}),"\uff09\uff0c\u4e0d\u663e\u793a"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"Read View"})," \u7528\u4e8e\u652f\u6301 ",(0,d.jsx)(n.code,{children:"RC"}),"\uff08",(0,d.jsx)(n.code,{children:"Read Committed"}),"\uff0c\u8bfb\u63d0\u4ea4\uff09\u548c ",(0,d.jsx)(n.code,{children:"RR"}),"\uff08",(0,d.jsx)(n.code,{children:"Repeatable Read"}),"\uff0c\u53ef\u91cd\u590d\u8bfb\uff09\u9694\u79bb\u7ea7\u522b\u7684\u5b9e\u73b0"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"RR"}),"\u3001",(0,d.jsx)(n.code,{children:"RC"})," \u9694\u79bb\u7ea7\u522b\u4e0b ",(0,d.jsx)(n.code,{children:"Read View"})," \u751f\u6210\u65f6\u673a","\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"RC"})," \u9694\u79bb\u7ea7\u522b\u4e0b\uff0c\u6bcf\u4e2a\u5feb\u7167\u8bfb\u90fd\u4f1a\u751f\u6210\u5e76\u83b7\u53d6\u6700\u65b0\u7684 ",(0,d.jsx)(n.code,{children:"Read View"})]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"RR"})," \u9694\u79bb\u7ea7\u522b\u4e0b\uff0c\u540c\u4e00\u4e2a\u4e8b\u52a1\u4e2d\u7684\u7b2c\u4e00\u4e2a\u5feb\u7167\u8bfb\u4f1a\u521b\u5efa ",(0,d.jsx)(n.code,{children:"Read View"}),", \u4e4b\u540e\u7684\u5feb\u7167\u8bfb\u83b7\u53d6\u7684\u90fd\u662f\u540c\u4e00\u4e2a ",(0,d.jsx)(n.code,{children:"Read View"})]}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"RC"}),"\u3001",(0,d.jsx)(n.code,{children:"RR"})," \u9694\u79bb\u7ea7\u522b\u4e0b\u5feb\u7167\u8bfb\u533a\u522b","\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"RR"})," \u7ea7\u522b\u4e0b\u4e8b\u52a1\u5bf9\u67d0\u6761\u8bb0\u5f55\u7684\u7b2c\u4e00\u6b21\u5feb\u7167\u8bfb\u4f1a\u521b\u5efa\u4e00\u4e2a\u5feb\u7167\u53ca ",(0,d.jsx)(n.code,{children:"Read View"}),"\uff0c \u5c06\u5f53\u524d\u7cfb\u7edf\u6d3b\u8dc3\u7684\u5176\u4ed6\u4e8b\u52a1\u8bb0\u5f55\u8d77\u6765\uff0c\u6b64\u540e\u5728\u8c03\u7528\u5feb\u7167\u8bfb\u7684\u65f6\u5019\uff0c\u4f7f\u7528\u7684\u662f\u540c\u4e00\u4e2a ",(0,d.jsx)(n.code,{children:"Read View"}),"\uff0c\u6240\u4ee5\u53ea\u8981\u5f53\u524d\u4e8b\u52a1\u5728\u5176\u4ed6\u4e8b\u52a1\u63d0\u4ea4\u66f4\u65b0\u4e4b\u524d\u4f7f\u7528\u8fc7\u5feb\u7167\u8bfb\uff0c\u90a3\u4e48\u4e4b\u540e\u7684\u5feb\u7167\u8bfb\u4f7f\u7528\u7684\u90fd\u662f\u540c\u4e00\u4e2a ",(0,d.jsx)(n.code,{children:"Read View"}),"\uff0c\u6240\u4ee5\u5bf9\u4e4b\u540e\u7684\u4fee\u6539\u4e0d\u53ef\u89c1\uff0c\u5373 ",(0,d.jsx)(n.code,{children:"RR"})," \u7ea7\u522b\u4e0b\uff0c\u5feb\u7167\u8bfb\u751f\u6210 ",(0,d.jsx)(n.code,{children:"Read View"})," \u65f6\uff0c",(0,d.jsx)(n.code,{children:"Read View"})," \u4f1a\u8bb0\u5f55\u6b64\u65f6\u6240\u6709\u5176\u4ed6\u6d3b\u52a8\u4e8b\u52a1\u7684\u5feb\u7167\uff0c\u8fd9\u4e9b\u4e8b\u52a1\u7684\u4fee\u6539\u5bf9\u4e8e\u5f53\u524d\u4e8b\u52a1\u90fd\u662f\u4e0d\u53ef\u89c1\u7684\uff0c\u800c\u65e9\u4e8e ",(0,d.jsx)(n.code,{children:"Read View"})," \u521b\u5efa\u7684\u4e8b\u52a1\u6240\u505a\u7684\u4fee\u6539\u5747\u662f\u53ef\u89c1"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"RC"})," \u7ea7\u522b\u4e0b\u4e8b\u52a1\u6bcf\u6b21\u5feb\u7167\u8bfb\u90fd\u4f1a\u65b0\u751f\u6210\u4e00\u4e2a\u5feb\u7167\u548c ",(0,d.jsx)(n.code,{children:"Read View"}),", \u6240\u4ee5 ",(0,d.jsx)(n.code,{children:"RC"})," \u7ea7\u522b\u4e8b\u52a1\u4e2d\u53ef\u4ee5\u770b\u5230\u5176\u4ed6\u4e8b\u52a1\u63d0\u4ea4\u7684\u66f4\u65b0"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(n.h2,{id:"mysql-\u5bf9\u5e7b\u8bfb\u7684\u5904\u7406",children:[(0,d.jsx)(n.code,{children:"MySQL"})," \u5bf9\u5e7b\u8bfb\u7684\u5904\u7406"]}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["\u5feb\u7167\u8bfb\uff1a\u901a\u8fc7 ",(0,d.jsx)(n.code,{children:"MVCC"})," \u6765\u8fdb\u884c\u63a7\u5236\u7684\uff0c\u4e0d\u7528\u52a0\u9501"]}),"\n",(0,d.jsxs)(n.li,{children:["\u5f53\u524d\u8bfb\uff1a\u901a\u8fc7 ",(0,d.jsx)(n.code,{children:"next-key"})," \u9501\uff08\u884c\u9501 + ",(0,d.jsx)(n.code,{children:"gap"})," \u9501\uff09\u6765\u89e3\u51b3"]}),"\n"]}),"\n",(0,d.jsx)(n.h2,{id:"\u805a\u96c6\u7d22\u5f15-vs-\u975e\u805a\u96c6\u7d22\u5f15",children:"\u805a\u96c6\u7d22\u5f15 vs. \u975e\u805a\u96c6\u7d22\u5f15"}),"\n",(0,d.jsx)(n.h3,{id:"\u805a\u96c6\u7d22\u5f15",children:"\u805a\u96c6\u7d22\u5f15"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"\u7d22\u5f15\u4e2d\u952e\u503c\u7684\u903b\u8f91\u987a\u5e8f\u51b3\u5b9a\u4e86\u8868\u4e2d\u76f8\u5e94\u884c\u7684\u7269\u7406\u987a\u5e8f\uff0c\u53ea\u8981\u662f\u7d22\u5f15\u662f\u8fde\u7eed\u7684\uff0c\u90a3\u4e48\u6570\u636e\u5728\u5b58\u50a8\u4ecb\u8d28\u4e0a\u7684\u5b58\u50a8\u4f4d\u7f6e\u4e5f\u662f\u8fde\u7eed\u7684"}),"\n",(0,d.jsx)(n.li,{children:"\u67e5\u8be2\u6548\u7387\u5feb\uff0c\u53ea\u8981\u627e\u5230\u7b2c\u4e00\u4e2a\u7d22\u5f15\u503c\u8bb0\u5f55\uff0c\u5176\u4f59\u8fde\u7eed\u6027\u7684\u8bb0\u5f55\u5728\u7269\u7406\u4e5f\u4e00\u6837\u8fde\u7eed\u5b58\u653e"}),"\n",(0,d.jsx)(n.li,{children:"\u4fee\u6539\u6162\uff0c\u56e0\u4e3a\u4e3a\u4e86\u4fdd\u8bc1\u8868\u4e2d\u8bb0\u5f55\u7684\u7269\u7406\u548c\u7d22\u5f15\u987a\u5e8f\u4e00\u81f4\uff0c\u5728\u8bb0\u5f55\u63d2\u5165\u7684\u65f6\u5019\uff0c\u4f1a\u5bf9\u6570\u636e\u9875\u91cd\u65b0\u6392\u5e8f"}),"\n",(0,d.jsx)(n.li,{children:"\u56e0\u4e3a\u5728\u7269\u7406\u5185\u5b58\u4e2d\u7684\u987a\u5e8f\u53ea\u80fd\u6709\u4e00\u79cd\uff0c\u6240\u4ee5\u805a\u96c6\u7d22\u5f15\u5728\u4e00\u4e2a\u8868\u4e2d\u53ea\u80fd\u6709\u4e00\u4e2a"}),"\n"]}),"\n",(0,d.jsx)(n.h3,{id:"\u975e\u805a\u96c6\u7d22\u5f15",children:"\u975e\u805a\u96c6\u7d22\u5f15"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"\u7d22\u5f15\u7684\u903b\u8f91\u987a\u5e8f\u4e0e\u78c1\u76d8\u4e0a\u7684\u7269\u7406\u5b58\u50a8\u987a\u5e8f\u4e0d\u540c\uff0c\u975e\u805a\u96c6\u7d22\u5f15\u7684\u952e\u503c\u5728\u903b\u8f91\u4e0a\u4e5f\u662f\u8fde\u7eed\u7684\uff0c\u4f46\u662f\u8868\u4e2d\u7684\u6570\u636e\u5728\u5b58\u50a8\u4ecb\u8d28\u4e0a\u7684\u7269\u7406\u987a\u5e8f\u662f\u4e0d\u4e00\u81f4\u7684\uff0c\u5373\u8bb0\u5f55\u7684\u903b\u8f91\u987a\u5e8f\u548c\u5b9e\u9645\u5b58\u50a8\u7684\u7269\u7406\u987a\u5e8f\u6ca1\u6709\u4efb\u4f55\u8054\u7cfb"}),"\n",(0,d.jsx)(n.li,{children:"\u53f6\u5b50\u5c42\u5e76\u4e0d\u548c\u5b9e\u9645\u6570\u636e\u9875\u76f8\u91cd\u53e0\uff0c\u53f6\u5b50\u5c42\u5305\u542b\u4e00\u4e2a\u6307\u5411\u8868\u4e2d\u7684\u8bb0\u5f55\u5728\u6570\u636e\u9875\u4e2d\u7684\u6307\u9488"}),"\n",(0,d.jsx)(n.li,{children:"\u5c42\u6b21\u591a\uff0c\u4e0d\u4f1a\u9020\u6210\u6570\u636e\u91cd\u6392"}),"\n",(0,d.jsx)(n.li,{children:"\u975e\u805a\u96c6\u7d22\u5f15\u4e00\u4e2a\u8868\u53ef\u4ee5\u5b58\u5728\u591a\u4e2a"}),"\n"]}),"\n",(0,d.jsx)(n.h2,{id:"btree",children:(0,d.jsx)(n.code,{children:"B+Tree"})}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.a,{href:"https://www.cnblogs.com/cangqinglang/p/15042752.html",children:"https://www.cnblogs.com/cangqinglang/p/15042752.html"})}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["\u4e0e ",(0,d.jsx)(n.code,{children:"B-Tree"})," \u76f8\u6bd4\uff0c",(0,d.jsx)(n.code,{children:"B+Tree"})," \u6709\u4ee5\u4e0b\u4e0d\u540c\u70b9\uff1a","\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["\u6bcf\u4e2a\u8282\u70b9\u7684\u6307\u9488\u4e0a\u9650\u4e3a ",(0,d.jsx)(n.code,{children:"2d"})," \u800c\u4e0d\u662f ",(0,d.jsx)(n.code,{children:"2d + 1"})]}),"\n",(0,d.jsxs)(n.li,{children:["\u5185\u8282\u70b9\u4e0d\u5b58\u50a8 ",(0,d.jsx)(n.code,{children:"data"}),"\uff0c\u53ea\u5b58\u50a8 ",(0,d.jsx)(n.code,{children:"key"}),"\uff0c\u53f6\u5b50\u8282\u70b9\u4e0d\u5b58\u50a8\u6307\u9488"]}),"\n",(0,d.jsxs)(n.li,{children:["\u6bcf\u4e2a\u53f6\u5b50\u8282\u70b9\u589e\u52a0\u4e00\u4e2a\u6307\u5411\u76f8\u90bb\u53f6\u5b50\u8282\u70b9\u7684\u6307\u9488\uff0c\u5c31\u5f62\u6210\u4e86\u5e26\u6709\u987a\u5e8f\u8bbf\u95ee\u6307\u9488\u7684 ",(0,d.jsx)(n.code,{children:"B+Tree"}),"\uff0c\u505a\u8fd9\u4e2a\u4f18\u5316\u7684\u76ee\u7684\u662f\u4e3a\u4e86\u63d0\u9ad8\u533a\u95f4\u8bbf\u95ee\u7684\u6027\u80fd"]}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:["\u5e73\u8861\u4e8c\u53c9\u6811\u6bcf\u4e2a\u8282\u70b9\u53ea\u5b58\u50a8\u4e00\u4e2a\u952e\u503c\u548c\u6570\u636e\u7684\uff0c\u5982\u679c\u8981\u5b58\u50a8\u6d77\u91cf\u7684\u6570\u636e\uff0c\u90a3\u4e48\u4e8c\u53c9\u6811\u7684\u8282\u70b9\u5c06\u4f1a\u975e\u5e38\u591a\uff0c\u9ad8\u5ea6\u4e5f\u4f1a\u6781\u5176\u9ad8\uff0c\u67e5\u627e\u6570\u636e\u65f6\u4f1a\u8fdb\u884c\u5f88\u591a\u6b21\u78c1\u76d8 ",(0,d.jsx)(n.code,{children:"IO"}),"\uff0c\u67e5\u627e\u6570\u636e\u7684\u6548\u7387\u5c06\u4f1a\u6781\u4f4e"]}),"\n"]}),"\n",(0,d.jsxs)(n.h2,{id:"mysql-\u4e3b\u4ece\u540c\u6b65",children:[(0,d.jsx)(n.code,{children:"MySQL"})," \u4e3b\u4ece\u540c\u6b65"]}),"\n",(0,d.jsxs)(n.blockquote,{children:["\n",(0,d.jsxs)(n.p,{children:["\u4e3b\u4ece\u540c\u6b65\u4f7f\u5f97\u6570\u636e\u53ef\u4ee5\u4ece\u4e00\u4e2a\u6570\u636e\u5e93\u670d\u52a1\u5668\u590d\u5236\u5230\u5176\u4ed6\u670d\u52a1\u5668\u4e0a\uff0c\u5728\u590d\u5236\u6570\u636e\u65f6\uff0c\u4e00\u4e2a\u670d\u52a1\u5668\u5145\u5f53\u4e3b\u670d\u52a1\u5668\uff08",(0,d.jsx)(n.code,{children:"master"}),"\uff09\uff0c\u5176\u4f59\u7684\u670d\u52a1\u5668\u5145\u5f53\u4ece\u670d\u52a1\u5668\uff08",(0,d.jsx)(n.code,{children:"slave"}),"\uff09\u3002\u56e0\u4e3a\u590d\u5236\u662f\u5f02\u6b65\u8fdb\u884c\u7684\uff0c\u6240\u4ee5\u4ece\u670d\u52a1\u5668\u4e0d\u9700\u8981\u4e00\u76f4\u8fde\u63a5\u7740\u4e3b\u670d\u52a1\u5668\uff0c\u4ece\u670d\u52a1\u5668\u751a\u81f3\u53ef\u4ee5\u901a\u8fc7\u62e8\u53f7\u65ad\u65ad\u7eed\u7eed\u5730\u8fde\u63a5\u4e3b\u670d\u52a1\u5668\u3002\u901a\u8fc7\u914d\u7f6e\u6587\u4ef6\uff0c\u53ef\u4ee5\u6307\u5b9a\u590d\u5236\u6240\u6709\u7684\u6570\u636e\u5e93\uff0c\u67d0\u4e2a\u6570\u636e\u5e93\uff0c\u751a\u81f3\u662f\u67d0\u4e2a\u6570\u636e\u5e93\u4e0a\u7684\u67d0\u4e2a\u8868\u3002"]}),"\n"]}),"\n",(0,d.jsx)(n.h3,{id:"\u4e3b\u4ece\u540c\u6b65\u7684\u597d\u5904",children:"\u4e3b\u4ece\u540c\u6b65\u7684\u597d\u5904"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"\u8bfb\u5199\u5206\u79bb\uff0c\u8ba9\u4e3b\u5e93\u8d1f\u8d23\u5199\uff0c\u4ece\u5e93\u8d1f\u8d23\u8bfb\uff0c\u5373\u4f7f\u4e3b\u5e93\u51fa\u73b0\u4e86\u9501\u8868\u7684\u60c5\u666f\uff0c\u901a\u8fc7\u8bfb\u4ece\u5e93\u4e5f\u53ef\u4ee5\u4fdd\u8bc1\u4e1a\u52a1\u7684\u6b63\u5e38\u8fd0\u884c"}),"\n",(0,d.jsx)(n.li,{children:"\u9ad8\u53ef\u7528\uff0c\u6570\u636e\u5b9e\u65f6\u5907\u4efd\uff08\u70ed\u5907\uff09\uff0c\u4e3b\u5e93\u5b95\u673a\u540e\u80fd\u591f\u53ca\u65f6\u66ff\u6362\u4e3b\u5e93\uff0c\u4fdd\u8bc1\u4e1a\u52a1\u53ef\u7528\u6027"}),"\n",(0,d.jsxs)(n.li,{children:["\u67b6\u6784\u7684\u6269\u5c55\uff0c\u589e\u52a0\u591a\u4e2a\u6570\u636e\u5b58\u50a8\u8282\u70b9\uff0c\u5c06\u8d1f\u8f7d\u5206\u5e03\u5728\u591a\u4e2a\u4ece\u8282\u70b9\u4e0a\uff0c\u53ef\u964d\u4f4e\u78c1\u76d8 ",(0,d.jsx)(n.code,{children:"I/O"})," \u8bbf\u95ee\u7684\u9891\u7387\uff0c\u63d0\u9ad8\u5355\u4e2a\u673a\u5668\u7684 ",(0,d.jsx)(n.code,{children:"I/O"})," \u6027\u80fd"]}),"\n"]}),"\n",(0,d.jsx)(n.h3,{id:"\u4e3b\u4ece\u5f62\u5f0f",children:"\u4e3b\u4ece\u5f62\u5f0f"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"\u4e00\u4e3b\u4e00\u4ece"}),"\n",(0,d.jsx)(n.li,{children:"\u4e00\u4e3b\u591a\u4ece"}),"\n",(0,d.jsxs)(n.li,{children:["\u591a\u4e3b\u4e00\u4ece \uff08",(0,d.jsx)(n.code,{children:"5.7+"}),"\uff09","\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"\u53ef\u5c06\u591a\u4e2a\u4e3b\u8282\u70b9\u6570\u636e\u5907\u4efd\u5230\u4e00\u53f0\u5b58\u50a8\u6027\u80fd\u6bd4\u8f83\u597d\u7684\u4ece\u8282\u70b9\u4e0a"}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:["\u53cc\u4e3b\u590d\u5236","\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["\u4e92\u505a\u4e3b\u4ece\u590d\u5236\uff0c\u4e24\u4e2a\u8282\u70b9\u4e92\u4e3a ",(0,d.jsx)(n.code,{children:"master/slave"}),"\uff0c\u4efb\u4e00\u8282\u70b9\u6240\u505a\u7684\u53d8\u66f4\u90fd\u4f1a\u590d\u5236\u5e94\u7528\u5230\u53e6\u5916\u4e00\u4e2a\u8282\u70b9"]}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:["\u7ea7\u8054\u590d\u5236","\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["\u90e8\u5206\u4ece\u8282\u70b9\u4e0d\u76f4\u63a5\u4ece\u4e3b\u8282\u70b9\u540c\u6b65\u6570\u636e\uff0c\u800c\u662f\u4ece\u4e0e\u4e3b\u8282\u70b9\u76f4\u8fde\u7684\u4ece\u8282\u70b9\u540c\u6b65\u6570\u636e\uff08\u4e3b\u8282\u70b9\u6709\u592a\u591a\u7684\u4ece\u8282\u70b9\uff0c\u4f1a\u635f\u8017\u4e00\u90e8\u5206\u6027\u80fd\u7528\u4e8e ",(0,d.jsx)(n.code,{children:"replication"}),"\uff0c\u53ef\u4ee5\u8ba9 ",(0,d.jsx)(n.code,{children:"3 ~ 5"}),"\u4e2a\u4ece\u8282\u70b9\u8fde\u63a5\u4e3b\u8282\u70b9\uff0c\u5176\u5b83\u4ece\u8282\u70b9\u4f5c\u4e3a\u4e8c\u7ea7\u6216\u8005\u4e09\u7ea7\u4e0e\u4ece\u8282\u70b9\u8fde\u63a5\uff0c\u8fd9\u6837\u4e0d\u4ec5\u53ef\u4ee5\u7f13\u89e3\u4e3b\u8282\u70b9\u7684\u538b\u529b\uff0c\u5e76\u4e14\u5bf9\u6570\u636e\u4e00\u81f4\u6027\u6ca1\u6709\u8d1f\u9762\u5f71\u54cd\uff09"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(n.h3,{id:"\u4e3b\u4ece\u540c\u6b65\u65b9\u6cd5",children:"\u4e3b\u4ece\u540c\u6b65\u65b9\u6cd5"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["\u6709\u591a\u79cd\u4e3b\u4ece\u540c\u6b65\u7684\u65b9\u6cd5","\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"Statement Based Replication"}),"\uff08",(0,d.jsx)(n.code,{children:"SBR"}),"\uff09\u57fa\u4e8e ",(0,d.jsx)(n.code,{children:"SQL"})," \u8bed\u53e5\u7684\u590d\u5236 \uff08",(0,d.jsx)(n.code,{children:"mysql5.6"})," \u9ed8\u8ba4\u4f7f\u7528\uff09","\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"\u65e5\u5fd7\u6587\u4ef6\u66f4\u5c0f"}),"\n",(0,d.jsx)(n.li,{children:"\u8bb0\u5f55\u4e86\u6240\u6709\u7684\u8bed\u53e5\uff0c\u53ef\u4ee5\u7528\u6765\u65e5\u540e\u5ba1\u8ba1"}),"\n",(0,d.jsx)(n.li,{children:"\u90e8\u5206\u51fd\u6570\u8bed\u53e5\u4e0d\u80fd\u88ab\u6b63\u786e\u5730\u590d\u5236"}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"INSERT ... SELECT"})," \u8bed\u53e5\u4f1a\u6267\u884c\u5927\u91cf\u7684\u884c\u7ea7\u9501\u8868"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"UPDATE"})," \u8bed\u53e5\u4f1a\u6267\u884c\u5927\u91cf\u7684\u884c\u7ea7\u9501\u8868\u6765\u626b\u63cf\u6574\u4e2a\u8868"]}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"Row Based Replication"}),"\uff08",(0,d.jsx)(n.code,{children:"RBR"}),"\uff09\u57fa\u4e8e\u884c\u7684\u590d\u5236","\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"\u6240\u6709\u7684\u6570\u636e\u53d8\u5316\u90fd\u662f\u88ab\u590d\u5236\uff0c\u8fd9\u662f\u6700\u5b89\u5168\u7684\u590d\u5236\u65b9\u5f0f"}),"\n",(0,d.jsx)(n.li,{children:"\u66f4\u5c11\u7684\u884c\u7ea7\u9501\u8868"}),"\n",(0,d.jsx)(n.li,{children:"\u65e5\u5fd7\u4f1a\u5f88\u5927"}),"\n",(0,d.jsxs)(n.li,{children:["\u4e0d\u80fd\u901a\u8fc7\u67e5\u770b\u65e5\u5fd7\u6765\u5ba1\u8ba1\u6267\u884c\u8fc7\u7684 ",(0,d.jsx)(n.code,{children:"sql"})," \u8bed\u53e5\uff08\u53ef\u901a\u8fc7 ",(0,d.jsx)(n.code,{children:"mysqlbinlog --base64-output=decode-rows --verbose"})," \u67e5\u770b\u6570\u636e\u53d8\u52a8\uff09"]}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"Mixed Based Replication"}),"\uff08",(0,d.jsx)(n.code,{children:"MBR"}),"\uff09 - ",(0,d.jsx)(n.code,{children:"SQL"})," + \u884c\u6df7\u5408\u590d\u5236\uff08\u65e2\u4f7f\u7528 ",(0,d.jsx)(n.code,{children:"SBR"})," \u4e5f\u4f7f\u7528 ",(0,d.jsx)(n.code,{children:"RBR"}),"\uff0c\u9ed8\u8ba4\u4f7f\u7528 ",(0,d.jsx)(n.code,{children:"SBR"}),"\uff09"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"global transaction identifiers"}),"\uff08",(0,d.jsx)(n.code,{children:"GTIDs"}),"\uff09\u57fa\u4e8e\u4e8b\u52a1\u7684\u590d\u5236(",(0,d.jsx)(n.code,{children:"GTIDs"})," \u5b8c\u5168\u57fa\u4e8e\u4e8b\u52a1\uff0c\u53ef\u5927\u5927\u7b80\u5316\u590d\u5236\u8fc7\u7a0b\uff0c\u53ea\u8981\u5728\u4e3b\u8282\u70b9\u4e0a\u63d0\u4ea4\u4e86\u4e8b\u52a1\uff0c\u4ece\u8282\u70b9\u5c31\u4e00\u5b9a\u4f1a\u6267\u884c\u8be5\u4e8b\u52a1\uff09"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(n.h3,{id:"\u914d\u7f6e\u4e3b\u4ece\u540c\u6b65",children:"\u914d\u7f6e\u4e3b\u4ece\u540c\u6b65"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["\u4e3b\u8282\u70b9\u64cd\u4f5c","\n",(0,d.jsxs)(n.ol,{children:["\n",(0,d.jsxs)(n.li,{children:["\u5f00\u542f\u4e8c\u8fdb\u5236\u65e5\u5fd7\uff0c\u5e76\u914d\u7f6e\u4e00\u4e2a\u72ec\u7acb\u7684 ",(0,d.jsx)(n.code,{children:"ID"}),"\uff08",(0,d.jsx)(n.code,{children:"server-id"}),"\uff09"]}),"\n"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-conf",children:"[mysqld]\nserver-id = 1\nlog-bin = mysql-bin                                                # \u65e5\u5fd7\u6587\u4ef6\nbinlog_format = MIXED                                              # \u65e5\u5fd7\u8bb0\u5f55\u7684\u683c\u5f0f\nmax_binlog_size = 512M  \u3000\u3000\u3000                                      # \u5355\u4e2a\u65e5\u5fd7\u6587\u4ef6\u6700\u5927\nexpire_logs_day = 3                                                # \u65e5\u5fd7\u6709\u6548\u671f\uff08\u5929\uff09\nbinlog_do_db = db1,db2                                             # \u65e5\u5fd7\u8bb0\u5f55\u7684\u6570\u636e\u5e93\nbinlog_ignore_db = mysql,performance_schema,information_schema     # \u65e5\u5fd7\u8bb0\u5f55\u5ffd\u7565\u7684\u6570\u636e\u5e93\n"})}),"\n",(0,d.jsxs)(n.ol,{start:"2",children:["\n",(0,d.jsx)(n.li,{children:"\u521b\u5efa\u4e00\u4e2a\u7528\u6765\u4e13\u95e8\u540c\u6b65\u6570\u636e\u7684\u8d26\u53f7"}),"\n"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-sql",children:"GRANT REPLICATION SLAVE ON *.* to 'slave'@'192.168.1.253' IDENTIFIED WITH caching_sha2_password BY '123456';\n"})}),"\n",(0,d.jsxs)(n.ol,{start:"3",children:["\n",(0,d.jsx)(n.li,{children:"\u5237\u65b0\u5e76\u9501\u8868\uff08\u53ea\u5141\u8bb8\u67e5\u6570\u636e\u4e0d\u5141\u8bb8\u5199\u6570\u636e\uff09"}),"\n"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-sql",children:"FLUSH TABLES WITH READ LOCK;\n"})}),"\n",(0,d.jsxs)(n.ol,{start:"4",children:["\n",(0,d.jsx)(n.li,{children:"\u5907\u4efd\u8981\u540c\u6b65\u7684\u6570\u636e\u5e93\u7684\u6570\u636e\uff0c\u62f7\u8d1d\u5230\u4ece\u8282\u70b9\uff08\u4ec5\u5728\u4e3b\u8282\u70b9\u5df2\u6709\u6570\u636e\u65f6\u9700\u8981\uff09"}),"\n"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-sql",children:"-- \u4e3b\u8282\u70b9\u5bfc\u51fa\u6570\u636e\nmysqldump -uroot -p db1 > db1.sql;\nmysqldump -uroot -p db2 > db2.sql;\n-- \u4ece\u8282\u70b9\u5bfc\u5165\u6570\u636e\nmysql -uroot -p db1 < db1.sql;\nmysql -uroot -p db2 < db2.sql;\n"})}),"\n",(0,d.jsxs)(n.ol,{start:"5",children:["\n",(0,d.jsxs)(n.li,{children:["\u67e5\u8be2\u5e76\u8bb0\u5f55 ",(0,d.jsx)(n.code,{children:"Position"})," \u548c ",(0,d.jsx)(n.code,{children:"File"})," \u7684\u503c\uff08\u4ece\u8282\u70b9\u914d\u7f6e\u540c\u6b65\u7528\uff09"]}),"\n"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-sql",children:"SHOW MASTER STATUS;\n"})}),"\n",(0,d.jsxs)(n.ol,{start:"6",children:["\n",(0,d.jsx)(n.li,{children:"\u5728\u5b8c\u6210\u4ece\u8282\u70b9\u64cd\u4f5c\u540e\uff08\u4ece\u8282\u70b9\u540c\u6b65\u72b6\u6001\u6b63\u5e38\uff09\uff0c\u89e3\u9501\u8868"}),"\n"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-sql",children:"UNLOCK TABLES;\n"})}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:["\u4ece\u8282\u70b9\u64cd\u4f5c","\n",(0,d.jsxs)(n.ol,{children:["\n",(0,d.jsxs)(n.li,{children:["\u5f00\u542f\u4e8c\u8fdb\u5236\u65e5\u5fd7\uff0c\u5e76\u914d\u7f6e\u4e00\u4e2a\u72ec\u7acb\u7684 ",(0,d.jsx)(n.code,{children:"ID"}),"\uff08",(0,d.jsx)(n.code,{children:"server-id"}),"\uff09"]}),"\n"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-conf",children:"[mysqld]\nserver-id = 2\nlog-bin = mysql-bin                                                # \u65e5\u5fd7\u6587\u4ef6\uff0c\u5efa\u8bae\u5f00\u542f\uff0c\u53ef\u80fd\u53d8\u4e3b\u8282\u70b9\nbinlog_format = MIXED                                              # \u65e5\u5fd7\u8bb0\u5f55\u7684\u683c\u5f0f\nmax_binlog_size = 512M  \u3000\u3000\u3000                                      # \u5355\u4e2a\u65e5\u5fd7\u6587\u4ef6\u6700\u5927\nexpire_logs_day = 3                                                # \u65e5\u5fd7\u6709\u6548\u671f\uff08\u5929\uff09\nreplicate_do_db = db1,db2                                          # \u590d\u5236\u7684\u6570\u636e\u5e93\nreplicate-ignore-db = mysql,performance_schema,information_schema  # \u5ffd\u7565\u7684\u6570\u636e\u5e93\nrelay_log_recovery = 1                                             # \u5efa\u8bae\u5f00\u542f\uff0c\u6709\u5229\u4e8e\u6570\u636e\u4e00\u81f4\u6027\nlog_slave_updates = 1                                              # \u5efa\u8bae\u5f00\u542f\uff0c\u53ef\u80fd\u53d8\u4e3b\u8282\u70b9\n"})}),"\n",(0,d.jsxs)(n.ol,{start:"2",children:["\n",(0,d.jsxs)(n.li,{children:["\u91cd\u542f\u4ece\u8282\u70b9\uff0c\u6267\u884c\u5982\u4e0b\u547d\u4ee4(\u5148\u505c\u6b62\u540c\u6b65\uff0c\u7136\u540e\u8bbe\u7f6e\u540c\u6b65\u4fe1\u606f\uff0c",(0,d.jsx)(n.code,{children:"master_log_file"})," \u548c ",(0,d.jsx)(n.code,{children:"master_log_pos"})," \u4ece\u4e3b\u8282\u70b9\u67e5\u8be2)"]}),"\n"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-sql",children:"STOP SLAVE;\nCHANGE MASTER TO\n    master_host = '192.168.1.252',\n    master_user = 'slave',\n    master_password = '123456',\n    master_port = 3306,\n    master_log_file = 'mysql-bin.000023', \n    master_log_pos = 2720\n    -- \u5b9a\u4e49\u901a\u9053\u540d\u79f0\uff0c\u53ef\u7528\u4e8e\u591a\u4e3b\u540c\u6b65\n    FOR CHANNEL 'channel_name';                                        \nSLAVE START;\n"})}),"\n",(0,d.jsxs)(n.ol,{start:"3",children:["\n",(0,d.jsx)(n.li,{children:"\u68c0\u67e5\u4ece\u8282\u70b9\u540c\u6b65\u72b6\u6001"}),"\n"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-sql",children:"SHOW SLAVE STATUS;\n"})}),"\n","\u4e3b\u8981\u770b\u8fd9\u51e0\u9879","\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-text",children:"lave_IO_Running: Yes\nSlave_SQL_Running: Yes\nMaster_Log_File: mysql-bin.000023\nRelay_Master_Log_File: mysql-bin.000023\nRead_Master_Log_Pos: 2720\nExec_master_log_pos: 2720\n"})}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(n.h3,{id:"\u4e3b\u4ece\u590d\u5236\u7684\u6d41\u7a0b",children:"\u4e3b\u4ece\u590d\u5236\u7684\u6d41\u7a0b"}),"\n",(0,d.jsxs)(n.ol,{children:["\n",(0,d.jsxs)(n.li,{children:["\u4e3b\u8282\u70b9\u7684\u66f4\u65b0\u4e8b\u4ef6\uff08",(0,d.jsx)(n.code,{children:"UPDATE"}),"\u3001",(0,d.jsx)(n.code,{children:"INSERT"}),"\u3001",(0,d.jsx)(n.code,{children:"DELETE"}),"\uff09\u88ab\u5199\u5230 ",(0,d.jsx)(n.code,{children:"binlog"})]}),"\n",(0,d.jsxs)(n.li,{children:["\u4ece\u8282\u70b9\u901a\u8fc7 ",(0,d.jsx)(n.code,{children:"I/O \u7ebf\u7a0b"})," \u521b\u5efa\u5230\u4e3b\u8282\u70b9\u7684\u8fde\u63a5\uff0c\u8fde\u63a5\u540e\u5411\u4e3b\u8282\u70b9\u53d1\u9001\u8eab\u4efd\u4fe1\u606f\u3001\u6240\u9700\u7684 ",(0,d.jsx)(n.code,{children:"binlog"})," \u6587\u4ef6\u540d\u53ca\u504f\u79fb\u91cf"]}),"\n",(0,d.jsxs)(n.li,{children:["\u4e3b\u8282\u70b9\u5f00\u542f ",(0,d.jsx)(n.code,{children:"dump \u7ebf\u7a0b"}),"\uff08\u6709\u591a\u4e2a\u4ece\u8282\u70b9\u65f6\u4f1a\u5206\u522b\u5f00\u542f ",(0,d.jsx)(n.code,{children:"dump"})," \u7ebf\u7a0b\uff09\u4e0e\u4ece\u5e93\u5efa\u7acb\u8fde\u63a5\uff0c\u8fde\u63a5\u540e\u6821\u9a8c\u4ece\u5e93\u7684\u8eab\u4efd\u4fe1\u606f\uff0c\u7136\u540e\u6839\u636e\u4ece\u8282\u70b9\u53d1\u6765\u7684 ",(0,d.jsx)(n.code,{children:"binlog"})," \u6587\u4ef6\u540d\u53ca\u504f\u79fb\u91cf\uff0c\u4ece\u672c\u5730\u8bfb\u53d6\u6307\u5b9a ",(0,d.jsx)(n.code,{children:"binlog"})," \u6587\u4ef6\uff0c\u53d1\u9001\u7ed9\u4ece\u5e93"]}),"\n",(0,d.jsxs)(n.li,{children:["\u4ece\u8282\u70b9\u62ff\u5230 ",(0,d.jsx)(n.code,{children:"binlog"})," \u6570\u636e\u540e\uff0c\u5c06\u5176\u5199\u5165\u672c\u5730\u7684\u4e2d\u7ee7\u65e5\u5fd7\uff08",(0,d.jsx)(n.code,{children:"relay log"}),"\uff09"]}),"\n",(0,d.jsxs)(n.li,{children:["\u4ece\u5e93\u7684 ",(0,d.jsx)(n.code,{children:"SQL \u7ebf\u7a0b"})," \u8bfb\u53d6\u4e2d\u7ee7\u65e5\u5fd7\uff0c\u9010\u4e2a\u89e3\u6790\u51fa\u65e5\u5fd7\u91cc\u7684\u547d\u4ee4\uff0c\u7136\u540e\u6267\u884c\u8fd9\u4e9b\u547d\u4ee4"]}),"\n"]}),"\n",(0,d.jsx)(n.h3,{id:"\u591a\u4e3b\u4e00\u4ece\u540c\u6b65",children:"\u591a\u4e3b\u4e00\u4ece\u540c\u6b65"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"\u57fa\u672c\u64cd\u4f5c\u4e0e\u4e00\u4e3b\u4e00\u4ece\u540c\u6b65\u4e00\u81f4\uff0c\u4ece\u8282\u70b9\u914d\u7f6e\u540c\u6b65\u7565\u6709\u4e0d\u540c\u3002"}),"\n"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-sql",children:"STOP SLAVE;\nCHANGE MASTER TO\n    master_host = '192.168.1.252',\n    master_user = 'slave',\n    master_password = '123456',\n    master_port = 3306,\n    master_log_file = 'mysql-bin.000023', \n    master_log_pos = 2720\n    -- \u5b9a\u4e49\u901a\u9053\u540d\u79f0\uff0c\u53ef\u7528\u4e8e\u591a\u4e3b\u540c\u6b65\n    FOR CHANNEL 'channel_1';\nCHANGE MASTER TO\n    master_host = '192.168.1.253',\n    master_user = 'slave',\n    master_password = '123456',\n    master_port = 3306,\n    master_log_file = 'mysql-bin.000023', \n    master_log_pos = 2720\n    -- \u5b9a\u4e49\u901a\u9053\u540d\u79f0\uff0c\u53ef\u7528\u4e8e\u591a\u4e3b\u540c\u6b65\n    FOR CHANNEL 'channel_2';                                         \nSLAVE START;\n"})}),"\n",(0,d.jsx)(n.h2,{id:"\u53cc\u4e3b\u540c\u6b65",children:"\u53cc\u4e3b\u540c\u6b65"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"\u57fa\u672c\u64cd\u4f5c\u4e0e\u4e00\u4e3b\u4e00\u4ece\u540c\u6b65\u4e00\u81f4\uff0c\u53ea\u4e0d\u8fc7\u8f6c\u6362\u89d2\u8272\u518d\u64cd\u4f5c\u4e00\u904d\u3002"}),"\n"]}),"\n",(0,d.jsx)(n.h2,{id:"\u7d22\u5f15\u4e0b\u63a8",children:"\u7d22\u5f15\u4e0b\u63a8"})]})}function j(e={}){const{wrapper:n}={...(0,i.a)(),...e.components};return n?(0,d.jsx)(n,{...e,children:(0,d.jsx)(x,{...e})}):x(e)}},1151:(e,n,l)=>{l.d(n,{Z:()=>r,a:()=>s});var d=l(7294);const i={},c=d.createContext(i);function s(e){const n=d.useContext(c);return d.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),d.createElement(c.Provider,{value:n},e.children)}}}]);