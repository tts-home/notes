"use strict";(self.webpackChunktts_notes=self.webpackChunktts_notes||[]).push([[2034],{6604:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>i,contentTitle:()=>a,default:()=>p,frontMatter:()=>r,metadata:()=>c,toc:()=>l});var s=t(5893),o=t(1151);const r={},a="Servlet \u4e0b\u8f7d\u4e2d\u6587\u6587\u4ef6\u540d\u4e71\u7801",c={id:"java/tutorial/servlet_download_chineses",title:"Servlet \u4e0b\u8f7d\u4e2d\u6587\u6587\u4ef6\u540d\u4e71\u7801",description:"Http header\u4e2d\u53ea\u652f\u6301ASCII\uff0c\u6240\u4ee5\u5728\u4e0b\u8f7d\u4e2d\u6587\u540d\u79f0\u6587\u4ef6\u65f6\uff0c\u5728UrlEncode\u65f6\u9700\u6b63\u786e\u5904\u7406\u5b57\u7b26\u96c6\uff0c\u4e0d\u7136\u6781\u6613\u51fa\u73b0\u4e2d\u6587\u4e71\u7801\u7684\u95ee\u9898\u3002",source:"@site/docs/java/tutorial/servlet_download_chineses.md",sourceDirName:"java/tutorial",slug:"/java/tutorial/servlet_download_chineses",permalink:"/notes/java/tutorial/servlet_download_chineses",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"docs",previous:{title:"\u7c7b\u8def\u5f84\u4e0b\u8d44\u6e90\u6587\u4ef6\u7684\u52a0\u8f7d",permalink:"/notes/java/tutorial/load_classpath_resources"},next:{title:"VM Options",permalink:"/notes/java/tutorial/vm_options"}},i={},l=[];function d(e){const n={blockquote:"blockquote",code:"code",h1:"h1",header:"header",p:"p",pre:"pre",...(0,o.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"servlet-\u4e0b\u8f7d\u4e2d\u6587\u6587\u4ef6\u540d\u4e71\u7801",children:"Servlet \u4e0b\u8f7d\u4e2d\u6587\u6587\u4ef6\u540d\u4e71\u7801"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"Http header"}),"\u4e2d\u53ea\u652f\u6301",(0,s.jsx)(n.code,{children:"ASCII"}),"\uff0c\u6240\u4ee5\u5728\u4e0b\u8f7d\u4e2d\u6587\u540d\u79f0\u6587\u4ef6\u65f6\uff0c\u5728",(0,s.jsx)(n.code,{children:"UrlEncode"}),"\u65f6\u9700\u6b63\u786e\u5904\u7406\u5b57\u7b26\u96c6\uff0c\u4e0d\u7136\u6781\u6613\u51fa\u73b0\u4e2d\u6587\u4e71\u7801\u7684\u95ee\u9898\u3002"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["\u5728\u4f7f\u7528",(0,s.jsx)(n.code,{children:"HttpServletResponse"}),"\u6765\u5b9e\u73b0\u6587\u4ef6\u4e0b\u8f7d\u65f6\uff0c\u53ef\u4ee5\u8bbe\u7f6eresponse header ",(0,s.jsx)(n.code,{children:"Content-Disposition"}),"\u6765\u6307\u5b9a\u4e0b\u8f7d\u7684\u6587\u4ef6\u540d\u3002\n\u5982\u679c\u6587\u4ef6\u540d\u5305\u542b\u4e2d\u6587\u5b57\u7b26\uff0c\u9700\u53c2\u8003\u4e0b\u65b9\u4ee3\u7801\u6765\u907f\u514d\u51fa\u73b0\u4e2d\u6587\u4e71\u7801\u3002"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:'fileName = URLEncoder.encode(fileName, "UTF-8").replaceAll("\\\\+", "%20");\nresponse.setContentType("application/octet-stream");\nresponse.setCharacterEncoding("UTF-8");\nfinal StringBuilder sb = new StringBuilder("attachment;");\nsb.append(" filename=\\"").append(fileName).append("\\";");\nsb.append(" filename*=utf-8\'\'").append(fileName);\nresponse.setHeader("Content-Disposition", sb.toString());\n'})}),"\n",(0,s.jsxs)(n.p,{children:["\u503c\u5f97\u5173\u6ce8\u7684\u662f\u8fd9\u4e00\u884c\u4ee3\u7801: ",(0,s.jsx)(n.code,{children:"sb.append(\" filename*=utf-8''\").append(fileName);"}),"\u3002\n\u6211\u4eec\u5728\u901a\u8fc7",(0,s.jsx)(n.code,{children:"filename=xxxx"}),"\u6307\u5b9aurl encode\u540e\u7684\u6587\u4ef6\u540d\u540e\uff0c\u8fd8\u9700\u8981\u901a\u8fc7",(0,s.jsx)(n.code,{children:"filename*=charset"}),"\u544a\u8bc9\u6d4f\u89c8\u5668\u4f7f\u7528\u4f55\u79cd\u5b57\u7b26\u96c6\u6765\u89e3\u7801\u6587\u4ef6\u540d\u3002"]}),"\n",(0,s.jsxs)(n.p,{children:["\u8fd9\u79cd\u89e3\u51b3\u65b9\u6848\u5728\u5404\u79cd\u73b0\u4ee3\u6d4f\u89c8\u5668\u5747\u901a\u8fc7\u9a8c\u8bc1\uff0c",(0,s.jsx)(n.code,{children:"Chrome"}),"\u3001",(0,s.jsx)(n.code,{children:"Firefox"}),"\u3001",(0,s.jsx)(n.code,{children:"Microsoft Edge"}),"\u3001",(0,s.jsx)(n.code,{children:"PostMan"}),"\u5747\u53ef\u5b8c\u7f8e\u4e0b\u8f7d\u4e2d\u6587\u540d\u79f0\u6587\u4ef6\u3002"]})]})}function p(e={}){const{wrapper:n}={...(0,o.a)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},1151:(e,n,t)=>{t.d(n,{Z:()=>c,a:()=>a});var s=t(7294);const o={},r=s.createContext(o);function a(e){const n=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:a(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);